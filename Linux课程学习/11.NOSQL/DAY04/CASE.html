
<!-- saved from url=(0076)http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>CASE</title>
    
    <script type="text/javascript" src="./CASE_files/jquery.min.js">
    </script>
    <script type="text/javascript" src="./CASE_files/jquery.snippet.js">
    </script>
    <script type="text/javascript" src="./CASE_files/main.js">
    </script>
    <link type="text/css" href="./CASE_files/index.css" rel="Stylesheet">
    <link type="text/css" href="./CASE_files/jquery.snippet.css" rel="Stylesheet">
  </head>
  <body>
    <div class="source_style_case">
      <a name="page_top_case" id="top_anchor">
      </a><a id="link_top" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#page_top_case">Top</a>
      <h1>NSD NOSQL DAY04</h1>
      <ol class="index">
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#case1">案例1：搭建MongoDB服务器</a>
        </li>
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#case2">案例2：MongoDB常用管理操作</a>
        </li>
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#case3">案例3：数据导入导出/备份/恢复</a>
        </li>
      </ol>
      <a name="case1">
      </a>
      <h2>1 案例1：搭建MongoDB服务器</h2>
      <h3>1.1 问题</h3>
      <ul class="list">
        <li>满足以下要求：
</li>
        <li>在主机192.168.4.51上部署MongoDB服务 
</li>
      </ul>
      <h3>1.2 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：搭建MongoDB服务器</p>
      <p>1）在主机192.168.4.51上部署MongoDB服务</p>
      <p>MongoDB：</p>
      <p>介于关系数据库和非关系数据库之间的产品</p>
      <p>一款基于分布式文件存储的数据库，旨在为WEB应用提供可扩展的高性能数据存储解决方案</p>
      <p>将数据存储为一个文档（类似于JSON对象），数据结构由键值（key=&gt;value）对组成</p>
      <p>支持丰富的查询表达，可以设置任何属性的索引</p>
      <p>支持副本集，分片</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@mongodb51 <span class="sh_symbol">~]</span># cd <span class="sh_normal">mongodb</span><span class="sh_symbol">/</span></li><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># ls</li><li>mongodb<span class="sh_symbol">-</span>linux<span class="sh_symbol">-</span>x86_64<span class="sh_symbol">-</span>rhel70<span class="sh_number">-3.6.3</span><span class="sh_symbol">.</span>tgz</li><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># tar <span class="sh_symbol">-</span>xf mongodb<span class="sh_symbol">-</span>linux<span class="sh_symbol">-</span>x86_64<span class="sh_symbol">-</span>rhel70<span class="sh_number">-3.6.3</span><span class="sh_symbol">.</span>tgz</li><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># <span class="sh_normal">mkdir  </span><span class="sh_symbol">/</span><span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">local</span><span class="sh_symbol">/</span>mongodb</li><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># <span class="sh_normal">cd </span><span class="sh_symbol">/</span><span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">local</span><span class="sh_symbol">/</span><span class="sh_normal">mongodb</span><span class="sh_symbol">/</span></li><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># cp <span class="sh_symbol">-</span>r <span class="sh_symbol">\</span> </li><li> <span class="sh_regexp">/root/m</span><span class="sh_normal">ongodb</span><span class="sh_symbol">/</span>mongodb<span class="sh_symbol">-</span>linux<span class="sh_symbol">-</span>x86_64<span class="sh_symbol">-</span>rhel70<span class="sh_number">-3.6.3</span><span class="sh_symbol">/</span><span class="sh_normal">bin</span><span class="sh_symbol">/</span>  <span class="sh_symbol">.</span></li><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># ls</li><li>bin</li><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># mkdir etc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//创建存放配置文件的目录</span></li><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># mkdir log&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//创建存放日志文件的目录</span></li><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># mkdir <span class="sh_symbol">-</span>p <span class="sh_normal">data</span><span class="sh_symbol">/</span>db&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//创建存放数据库的目录db，必须为这个名字</span></li><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># vim <span class="sh_normal">etc</span><span class="sh_symbol">/</span>mongodb<span class="sh_symbol">.</span>conf</li><li>dbpath<span class="sh_symbol">=</span><span class="sh_regexp">/usr/</span><span class="sh_normal">local</span><span class="sh_symbol">/</span><span class="sh_normal">mongodb</span><span class="sh_symbol">/</span><span class="sh_normal">data</span><span class="sh_symbol">/</span><span class="sh_normal">db</span><span class="sh_symbol">/</span>     <span class="sh_comment">//指定数据库目录</span></li><li>logpath<span class="sh_symbol">=</span><span class="sh_regexp">/usr/</span><span class="sh_normal">local</span><span class="sh_symbol">/</span><span class="sh_normal">mongodb</span><span class="sh_symbol">/</span><span class="sh_normal">log</span><span class="sh_symbol">/</span>mongodb<span class="sh_symbol">.</span>log    <span class="sh_comment">//指定日志文件</span></li><li>logappend<span class="sh_symbol">=</span><span class="sh_keyword">true</span>      <span class="sh_comment">//以追加的方式记录日志信息</span></li><li>fork<span class="sh_symbol">=</span><span class="sh_keyword">true</span>       <span class="sh_comment">//服务以守护进程的方式运行</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@mongodb51 ~]# cd mongodb/
[root@mongodb51 mongodb]# ls
mongodb-linux-x86_64-rhel70-3.6.3.tgz
[root@mongodb51 mongodb]# tar -xf mongodb-linux-x86_64-rhel70-3.6.3.tgz
[root@mongodb51 mongodb]# mkdir  /usr/local/mongodb
[root@mongodb51 mongodb]# cd /usr/local/mongodb/
[root@mongodb51 mongodb]# cp -r \ 
 /root/mongodb/mongodb-linux-x86_64-rhel70-3.6.3/bin/  .
[root@mongodb51 mongodb]# ls
bin
[root@mongodb51 mongodb]# mkdir etc		//创建存放配置文件的目录
[root@mongodb51 mongodb]# mkdir log		//创建存放日志文件的目录
[root@mongodb51 mongodb]# mkdir -p data/db	//创建存放数据库的目录db，必须为这个名字
[root@mongodb51 mongodb]# vim etc/mongodb.conf
dbpath=/usr/local/mongodb/data/db/     //指定数据库目录
logpath=/usr/local/mongodb/log/mongodb.log    //指定日志文件
logappend=true      //以追加的方式记录日志信息
fork=true       //服务以守护进程的方式运行
</pre></div></div>
      <p>2）设置PATH变量</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># <span class="sh_normal">vim </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>profile</li><li><span class="sh_keyword">export</span> PATH<span class="sh_symbol">=</span><span class="sh_regexp">/usr/</span><span class="sh_normal">local</span><span class="sh_symbol">/</span><span class="sh_normal">mongodb</span><span class="sh_symbol">/</span>bin<span class="sh_symbol">:</span>$PATH</li><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># <span class="sh_normal">source  </span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>profile</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@mongodb51 mongodb]# vim /etc/profile
export PATH=/usr/local/mongodb/bin:$PATH
[root@mongodb51 mongodb]# source  /etc/profile
</pre></div></div>
      <p>3）启动服务</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># mongod  <span class="sh_symbol">-</span><span class="sh_normal">f </span><span class="sh_symbol">/</span><span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">local</span><span class="sh_symbol">/</span><span class="sh_normal">mongodb</span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>mongodb<span class="sh_symbol">.</span>conf</li><li>about to fork child process<span class="sh_symbol">,</span> waiting until server is ready <span class="sh_keyword">for</span> connections<span class="sh_symbol">.</span></li><li>forked process<span class="sh_symbol">:</span> <span class="sh_number">28001</span></li><li>child process started successfully<span class="sh_symbol">,</span> parent exiting&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//启动成功</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@mongodb51 mongodb]# mongod  -f /usr/local/mongodb/etc/mongodb.conf
about to fork child process, waiting until server is ready for connections.
forked process: 28001
child process started successfully, parent exiting		//启动成功

</pre></div></div>
      <p>4）验证配置，默认端口为27017</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span>#  <span class="sh_normal">ls </span><span class="sh_symbol">/</span><span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">local</span><span class="sh_symbol">/</span><span class="sh_normal">mongodb</span><span class="sh_symbol">/</span><span class="sh_normal">data</span><span class="sh_symbol">/</span><span class="sh_normal">db</span><span class="sh_symbol">/</span></li><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># ps <span class="sh_symbol">-</span>C mongod</li><li>  PID TTY          TIME CMD</li><li><span class="sh_number">28001</span> <span class="sh_symbol">?</span>        <span class="sh_number">00</span><span class="sh_symbol">:</span><span class="sh_number">00</span><span class="sh_symbol">:</span><span class="sh_number">01</span> mongod</li><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># netstat <span class="sh_symbol">-</span>antup <span class="sh_symbol">|</span> grep mongod</li><li>tcp        <span class="sh_number">0</span>      <span class="sh_number">0</span> <span class="sh_number">127.0.0.1</span><span class="sh_symbol">:</span><span class="sh_number">27017</span>         <span class="sh_number">0.0.0.0</span><span class="sh_symbol">:*</span>               LISTEN      <span class="sh_number">28001</span><span class="sh_symbol">/</span>mongod</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@mongodb51 mongodb]#  ls /usr/local/mongodb/data/db/
[root@mongodb51 mongodb]# ps -C mongod
  PID TTY          TIME CMD
28001 ?        00:00:01 mongod
[root@mongodb51 mongodb]# netstat -antup | grep mongod
tcp        0      0 127.0.0.1:27017         0.0.0.0:*               LISTEN      28001/mongod
</pre></div></div>
      <p>5）连接服务</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># mongo   <span class="sh_comment">//默认本地连接，没有密码</span></li><li>MongoDB shell version v3<span class="sh_number">.6.3</span></li><li>connecting to<span class="sh_symbol">:</span> mongodb<span class="sh_symbol">:</span><span class="sh_comment">//127.0.0.1:27017</span></li><li>MongoDB server version<span class="sh_symbol">:</span> <span class="sh_number">3.6.3</span></li><li><span class="sh_symbol">...</span></li><li><span class="sh_symbol">...</span></li><li><span class="sh_symbol">&gt;</span> show dbs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//显示已有的库</span></li><li>admin   <span class="sh_number">0</span><span class="sh_symbol">.</span>000GB</li><li>config  <span class="sh_number">0</span><span class="sh_symbol">.</span>000GB</li><li>local   <span class="sh_number">0</span><span class="sh_symbol">.</span>000GB</li><li><span class="sh_symbol">&gt;</span> db&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//查看当前所在的库</span></li><li>test</li><li><span class="sh_symbol">&gt;</span> exit</li><li>bye</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@mongodb51 mongodb]# mongo   //默认本地连接，没有密码
MongoDB shell version v3.6.3
connecting to: mongodb://127.0.0.1:27017
MongoDB server version: 3.6.3
...
...
&gt; show dbs		//显示已有的库
admin   0.000GB
config  0.000GB
local   0.000GB
&gt; db				//查看当前所在的库
test
&gt; exit
bye
</pre></div></div>
      <p>6）停止服务</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># mongod  <span class="sh_symbol">--</span>dbpath<span class="sh_symbol">=</span><span class="sh_regexp">/usr/</span><span class="sh_normal">local</span><span class="sh_symbol">/</span><span class="sh_normal">mongodb</span><span class="sh_symbol">/</span><span class="sh_normal">data</span><span class="sh_symbol">/</span><span class="sh_normal">db</span><span class="sh_symbol">/</span>  <span class="sh_symbol">--</span>shutdown&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//指定数据库目录停止服务，不然停止不了</span></li><li>killing process <span class="sh_keyword">with</span> pid<span class="sh_symbol">:</span> <span class="sh_number">28001</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@mongodb51 mongodb]# mongod  --dbpath=/usr/local/mongodb/data/db/  --shutdown		//指定数据库目录停止服务，不然停止不了
killing process with pid: 28001

</pre></div></div>
      <p>7）由于启动和停止服务名字太长，可以起一个别名</p>
      <p>给停止服务起一个别名</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># alias cmdb<span class="sh_symbol">=</span><span class="sh_string">'mongod  --dbpath=/usr/local/mongodb/data/db/  --shutdown'</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@mongodb51 mongodb]# alias cmdb='mongod  --dbpath=/usr/local/mongodb/data/db/  --shutdown'
</pre></div></div>
      <p>给启动服务起一个别名</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># alias smdb<span class="sh_symbol">=</span><span class="sh_string">'mongod -f /usr/local/mongodb/etc/mongodb.conf'</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@mongodb51 mongodb]# alias smdb='mongod -f /usr/local/mongodb/etc/mongodb.conf'
</pre></div></div>
      <p>8）修改配置文件，使用ip和端口连接服务</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># <span class="sh_normal">vim </span><span class="sh_symbol">/</span><span class="sh_normal">usr</span><span class="sh_symbol">/</span><span class="sh_normal">local</span><span class="sh_symbol">/</span><span class="sh_normal">mongodb</span><span class="sh_symbol">/</span><span class="sh_normal">etc</span><span class="sh_symbol">/</span>mongodb<span class="sh_symbol">.</span>conf</li><li>bind_ip<span class="sh_symbol">=</span><span class="sh_number">192.168.4.51</span>    <span class="sh_comment">//在原先的基础上面加上这两个，指定ip</span></li><li>port<span class="sh_symbol">=</span><span class="sh_number">27077</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//指定端口号</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># smdb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//启动服务，之前设置过别名</span></li><li>about to fork child process<span class="sh_symbol">,</span> waiting until server is ready <span class="sh_keyword">for</span> connections<span class="sh_symbol">.</span></li><li>forked process<span class="sh_symbol">:</span> <span class="sh_number">28240</span></li><li>child process started successfully<span class="sh_symbol">,</span> parent exiting</li><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># ps <span class="sh_symbol">-</span>C mongod</li><li>  PID TTY          TIME CMD</li><li><span class="sh_number">28240</span> <span class="sh_symbol">?</span>        <span class="sh_number">00</span><span class="sh_symbol">:</span><span class="sh_number">00</span><span class="sh_symbol">:</span><span class="sh_number">01</span> mongod</li><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># netstat <span class="sh_symbol">-</span>antup <span class="sh_symbol">|</span> grep mongod</li><li>tcp        <span class="sh_number">0</span>      <span class="sh_number">0</span> <span class="sh_number">192.168.4.51</span><span class="sh_symbol">:</span><span class="sh_number">27077</span>      <span class="sh_number">0.0.0.0</span><span class="sh_symbol">:*</span>               LISTEN      <span class="sh_number">28240</span><span class="sh_symbol">/</span>mongod</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@mongodb51 mongodb]# vim /usr/local/mongodb/etc/mongodb.conf
bind_ip=192.168.4.51    //在原先的基础上面加上这两个，指定ip
port=27077			//指定端口号

[root@mongodb51 mongodb]# smdb		//启动服务，之前设置过别名
about to fork child process, waiting until server is ready for connections.
forked process: 28240
child process started successfully, parent exiting
[root@mongodb51 mongodb]# ps -C mongod
  PID TTY          TIME CMD
28240 ?        00:00:01 mongod
[root@mongodb51 mongodb]# netstat -antup | grep mongod
tcp        0      0 192.168.4.51:27077      0.0.0.0:*               LISTEN      28240/mongod
</pre></div></div>
      <p>9）连接服务</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@mongodb51 mongodb<span class="sh_symbol">]</span># mongo <span class="sh_symbol">--</span>host <span class="sh_number">192.168.4.51</span> <span class="sh_symbol">--</span>port <span class="sh_number">27077</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//成功</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@mongodb51 mongodb]# mongo --host 192.168.4.51 --port 27077		//成功
</pre></div></div>
      <a name="case2">
      </a>
      <h2>2 案例2：MongoDB常用管理操作</h2>
      <h3>2.1 问题</h3>
      <ul class="list">
        <li>要求如下：
</li>
        <li>练习库的创建、查看、切换、删除
</li>
        <li>练习集合的创建、查看、删除
</li>
        <li>练习文档的查看、插入、删除
</li>
      </ul>
      <h3>2.2 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：MongoDB常用管理操作</p>
      <p>1）数据库管理</p>
      <p>命令格式：</p>
      <p>show  dbs  				查看已有的库</p>
      <p>db              		显示当前所在的库</p>
      <p>use  库名    			切换库，若库不存在延时创建库</p>
      <p>show collections 或 show tables   查看库下已有集合</p>
      <p>db.dropDatabase()   	删除当前所在的库</p>
      <p>查看</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span> show  dbs &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//查看已有的库</span></li><li>admin   <span class="sh_number">0</span><span class="sh_symbol">.</span>000GB</li><li>config  <span class="sh_number">0</span><span class="sh_symbol">.</span>000GB</li><li>local   <span class="sh_number">0</span><span class="sh_symbol">.</span>000GB</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt; show  dbs 		//查看已有的库
admin   0.000GB
config  0.000GB
local   0.000GB
</pre></div></div>
      <p>创建，切换</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span> db&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//显示当前所在的库</span></li><li>test</li><li><span class="sh_symbol">&gt;</span> use ddsdb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//切换库，若库不存在的话 会自动延时创建库 </span></li><li>switched to db ddsdb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_symbol">&gt;</span> db&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li>ddsdb</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt; db		//显示当前所在的库
test
&gt; use ddsdb		//切换库，若库不存在的话 会自动延时创建库 
switched to db ddsdb		
&gt; db		
ddsdb

</pre></div></div>
      <p>2）集合管理</p>
      <p>命令格式：</p>
      <p>show  collections  或  show  tables  查看集合</p>
      <p>db.集合名.drop()                  删除集合</p>
      <p>db.集合名.save({'',''})          创建集合，集合不存在时，创建并添加文档</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>name<span class="sh_symbol">:</span><span class="sh_string">"yaya"</span><span class="sh_symbol">,</span>age<span class="sh_symbol">:</span><span class="sh_number">60</span><span class="sh_symbol">,</span>addr<span class="sh_symbol">:</span><span class="sh_string">"hebei"</span><span class="sh_symbol">,</span>email<span class="sh_symbol">:</span><span class="sh_string">"yaya@163.com"</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span> </li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>name<span class="sh_symbol">:</span><span class="sh_string">"yaya"</span><span class="sh_symbol">,</span>age<span class="sh_symbol">:</span><span class="sh_number">70</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_symbol">&gt;</span> show tables</li><li>t1</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt; db.t1.save({name:"yaya",age:60,addr:"hebei",email:"yaya@163.com"})
WriteResult({ "nInserted" : 1 }) 
&gt; db.t1.save({name:"yaya",age:70})
WriteResult({ "nInserted" : 1 })
&gt; show tables
t1
</pre></div></div>
      <p>查看集合里的所有内容</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>name<span class="sh_symbol">:</span><span class="sh_string">"yaya"</span><span class="sh_symbol">,</span>age<span class="sh_symbol">:</span><span class="sh_number">70</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_symbol">&gt;</span>  db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">find</span><span class="sh_symbol">()</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badf1b420cdd1574b851f12"</span><span class="sh_symbol">),</span> <span class="sh_string">"name"</span> <span class="sh_symbol">:</span> <span class="sh_string">"yaya"</span><span class="sh_symbol">,</span> <span class="sh_string">"age"</span> <span class="sh_symbol">:</span> <span class="sh_number">60</span><span class="sh_symbol">,</span> <span class="sh_string">"addr"</span> <span class="sh_symbol">:</span> <span class="sh_string">"hebei"</span><span class="sh_symbol">,</span> <span class="sh_string">"email"</span> <span class="sh_symbol">:</span> <span class="sh_string">"yaya@163.com"</span> <span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badf21820cdd1574b851f13"</span><span class="sh_symbol">),</span> <span class="sh_string">"name"</span> <span class="sh_symbol">:</span> <span class="sh_string">"yaya"</span><span class="sh_symbol">,</span> <span class="sh_string">"age"</span> <span class="sh_symbol">:</span> <span class="sh_number">70</span> <span class="sh_cbracket">}</span></li><li><span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt; db.t1.save({name:"yaya",age:70})
WriteResult({ "nInserted" : 1 })
&gt;  db.t1.find()
{ "_id" : ObjectId("5badf1b420cdd1574b851f12"), "name" : "yaya", "age" : 60, "addr" : "hebei", "email" : "yaya@163.com" }
{ "_id" : ObjectId("5badf21820cdd1574b851f13"), "name" : "yaya", "age" : 70 }
&gt;
</pre></div></div>
      <p>查看第一行的内容</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">findOne</span><span class="sh_symbol">()</span></li><li><span class="sh_cbracket">{</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badf1b420cdd1574b851f12"</span><span class="sh_symbol">),</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_string">"name"</span> <span class="sh_symbol">:</span> <span class="sh_string">"yaya"</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_string">"age"</span> <span class="sh_symbol">:</span> <span class="sh_number">60</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_string">"addr"</span> <span class="sh_symbol">:</span> <span class="sh_string">"hebei"</span><span class="sh_symbol">,</span></li><li>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_string">"email"</span> <span class="sh_symbol">:</span> <span class="sh_string">"yaya@163.com"</span></li><li><span class="sh_cbracket">}</span></li><li><span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt; db.t1.findOne()
{
	"_id" : ObjectId("5badf1b420cdd1574b851f12"),
	"name" : "yaya",
	"age" : 60,
	"addr" : "hebei",
	"email" : "yaya@163.com"
}
&gt;
</pre></div></div>
      <p>3）文档管理</p>
      <p>命令格式：</p>
      <p>db.集合名.find()</p>
      <p>db.集合名.count()</p>
      <p>db.集合名.insert({“name”:”jim”})</p>
      <p>db.集合名.find(条件)</p>
      <p>db.集合名.findOne() 		返回查询一条文档</p>
      <p>db.集合名.remove({})  		删除所有文档</p>
      <p>db.集合名.remove({条件}) 	删除与条件匹配的所有文档</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>name<span class="sh_symbol">:</span><span class="sh_string">"xm"</span><span class="sh_symbol">,</span>age<span class="sh_symbol">:</span><span class="sh_number">18</span><span class="sh_symbol">,</span><span class="sh_string">"addr"</span><span class="sh_symbol">:</span><span class="sh_string">"hn"</span><span class="sh_symbol">,</span><span class="sh_string">"email"</span><span class="sh_symbol">:</span><span class="sh_string">"xm.qq.com"</span><span class="sh_symbol">,</span><span class="sh_string">"like"</span><span class="sh_symbol">:</span><span class="sh_string">"nicai"</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">count</span><span class="sh_symbol">()</span></li><li><span class="sh_number">3</span></li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">find</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>name<span class="sh_symbol">:</span><span class="sh_string">"xm"</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badf4bc20cdd1574b851f14"</span><span class="sh_symbol">),</span> <span class="sh_string">"name"</span> <span class="sh_symbol">:</span> <span class="sh_string">"xm"</span><span class="sh_symbol">,</span> <span class="sh_string">"age"</span> <span class="sh_symbol">:</span> <span class="sh_number">18</span><span class="sh_symbol">,</span> <span class="sh_string">"addr"</span> <span class="sh_symbol">:</span> <span class="sh_string">"hn"</span><span class="sh_symbol">,</span> <span class="sh_string">"email"</span> <span class="sh_symbol">:</span> <span class="sh_string">"xm.qq.com"</span><span class="sh_symbol">,</span> <span class="sh_string">"like"</span> <span class="sh_symbol">:</span> <span class="sh_string">"nicai"</span> <span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt; db.t1.save({name:"xm",age:18,"addr":"hn","email":"xm.qq.com","like":"nicai"})
WriteResult({ "nInserted" : 1 })
&gt; db.t1.count()
3
&gt; db.t1.find({name:"xm"})
{ "_id" : ObjectId("5badf4bc20cdd1574b851f14"), "name" : "xm", "age" : 18, "addr" : "hn", "email" : "xm.qq.com", "like" : "nicai" }
</pre></div></div>
      <p>删除与条件匹配的所有文档</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span>  db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">remove</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>name<span class="sh_symbol">:</span><span class="sh_string">"yaya"</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nRemoved"</span> <span class="sh_symbol">:</span> <span class="sh_number">2</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt;  db.t1.remove({name:"yaya"})
WriteResult({ "nRemoved" : 2 })
</pre></div></div>
      <p>删除所有文档</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span>  db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">remove</span><span class="sh_symbol">(</span><span class="sh_cbracket">{}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nRemoved"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt;  db.t1.remove({})
WriteResult({ "nRemoved" : 1 })
</pre></div></div>
      <p>4）插入记录</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>col<span class="sh_symbol">.</span><span class="sh_function">insert</span><span class="sh_symbol">(</span></li><li><span class="sh_cbracket">{</span> title<span class="sh_symbol">:</span> <span class="sh_string">'MongoDB 教程'</span><span class="sh_symbol">,</span></li><li>   description<span class="sh_symbol">:</span> <span class="sh_string">'MongoDB 是一个 Nosql 数据库'</span><span class="sh_symbol">,</span></li><li>   by<span class="sh_symbol">:</span> <span class="sh_string">'MongoDB中文网'</span><span class="sh_symbol">,</span> </li><li>   url<span class="sh_symbol">:</span> <span class="sh_string">'http://www.mongodb.org.cn'</span><span class="sh_symbol">,</span> </li><li>   tags<span class="sh_symbol">:</span> <span class="sh_symbol">[</span><span class="sh_string">'mongodb'</span><span class="sh_symbol">,</span> <span class="sh_string">'database'</span><span class="sh_symbol">,</span> <span class="sh_string">'NoSQL'</span><span class="sh_symbol">],</span></li><li>   likes<span class="sh_symbol">:</span> <span class="sh_number">100</span> </li><li> <span class="sh_cbracket">}</span></li><li> <span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt; db.col.insert(
{ title: 'MongoDB 教程',
   description: 'MongoDB 是一个 Nosql 数据库',
   by: 'MongoDB中文网', 
   url: 'http://www.mongodb.org.cn', 
   tags: ['mongodb', 'database', 'NoSQL'],
   likes: 100 
 }
 )
WriteResult({ "nInserted" : 1 })
</pre></div></div>
      <p>删除记录</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>col<span class="sh_symbol">.</span><span class="sh_function">remove</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span><span class="sh_string">'title'</span><span class="sh_symbol">:</span><span class="sh_string">'MongoDB 教程'</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nRemoved"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt; db.col.remove({'title':'MongoDB 教程'})
WriteResult({ "nRemoved" : 1 })
</pre></div></div>
      <p class="number">步骤二：基本数据类型</p>
      <p>1）null：用于表示空值或者不存在的字段，{“x”:null}</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>name<span class="sh_symbol">:</span><span class="sh_string">"bob"</span><span class="sh_symbol">,</span>work<span class="sh_symbol">:</span><span class="sh_keyword">null</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">&gt;</span>  db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">find</span><span class="sh_symbol">()</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badf71520cdd1574b851f16"</span><span class="sh_symbol">),</span> <span class="sh_string">"name"</span> <span class="sh_symbol">:</span> <span class="sh_string">"bob"</span><span class="sh_symbol">,</span> <span class="sh_string">"work"</span> <span class="sh_symbol">:</span> <span class="sh_keyword">null</span> <span class="sh_cbracket">}</span></li><li><span class="sh_symbol">&gt;</span>  db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>_id<span class="sh_symbol">:</span><span class="sh_number">9</span><span class="sh_symbol">,</span>name<span class="sh_symbol">:</span><span class="sh_string">"jerry"</span><span class="sh_symbol">,</span>work<span class="sh_symbol">:</span><span class="sh_keyword">null</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li><li><span class="sh_comment">//_id默认自己创建出来，按一定的规律生成</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nMatched"</span> <span class="sh_symbol">:</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_string">"nUpserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span><span class="sh_symbol">,</span> <span class="sh_string">"nModified"</span> <span class="sh_symbol">:</span> <span class="sh_number">0</span><span class="sh_symbol">,</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_number">9</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_symbol">&gt;</span>  db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">find</span><span class="sh_symbol">()</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badf71520cdd1574b851f16"</span><span class="sh_symbol">),</span> <span class="sh_string">"name"</span> <span class="sh_symbol">:</span> <span class="sh_string">"bob"</span><span class="sh_symbol">,</span> <span class="sh_string">"work"</span> <span class="sh_symbol">:</span> <span class="sh_keyword">null</span> <span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_number">9</span><span class="sh_symbol">,</span> <span class="sh_string">"name"</span> <span class="sh_symbol">:</span> <span class="sh_string">"jerry"</span><span class="sh_symbol">,</span> <span class="sh_string">"work"</span> <span class="sh_symbol">:</span> <span class="sh_keyword">null</span> <span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt; db.t1.save({name:"bob",work:null})
WriteResult({ "nInserted" : 1 })

&gt;  db.t1.find()
{ "_id" : ObjectId("5badf71520cdd1574b851f16"), "name" : "bob", "work" : null }
&gt;  db.t1.save({_id:9,name:"jerry",work:null})		
//_id默认自己创建出来，按一定的规律生成

WriteResult({ "nMatched" : 0, "nUpserted" : 1, "nModified" : 0, "_id" : 9 })
&gt;  db.t1.find()
{ "_id" : ObjectId("5badf71520cdd1574b851f16"), "name" : "bob", "work" : null }
{ "_id" : 9, "name" : "jerry", "work" : null }
</pre></div></div>
      <p>2）布尔值：布尔类型有两个值true和false，{“x”:true}</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>name<span class="sh_symbol">:</span><span class="sh_string">"zhangsan"</span><span class="sh_symbol">,</span>addr<span class="sh_symbol">:</span><span class="sh_string">"shanghai"</span><span class="sh_symbol">,</span>marry<span class="sh_symbol">:</span><span class="sh_string">"true"</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>name<span class="sh_symbol">:</span><span class="sh_string">"lisi"</span><span class="sh_symbol">,</span>age<span class="sh_symbol">:</span><span class="sh_number">35</span><span class="sh_symbol">,</span>addr<span class="sh_symbol">:</span><span class="sh_string">"beijing"</span><span class="sh_symbol">,</span>marry<span class="sh_symbol">:</span><span class="sh_string">"false"</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">find</span><span class="sh_symbol">()</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badf71520cdd1574b851f16"</span><span class="sh_symbol">),</span> <span class="sh_string">"name"</span> <span class="sh_symbol">:</span> <span class="sh_string">"bob"</span><span class="sh_symbol">,</span> <span class="sh_string">"work"</span> <span class="sh_symbol">:</span> <span class="sh_keyword">null</span> <span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_number">9</span><span class="sh_symbol">,</span> <span class="sh_string">"name"</span> <span class="sh_symbol">:</span> <span class="sh_string">"jerry"</span><span class="sh_symbol">,</span> <span class="sh_string">"work"</span> <span class="sh_symbol">:</span> <span class="sh_keyword">null</span> <span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badf7b020cdd1574b851f17"</span><span class="sh_symbol">),</span> <span class="sh_string">"name"</span> <span class="sh_symbol">:</span> <span class="sh_string">"zhangsan"</span><span class="sh_symbol">,</span> <span class="sh_string">"addr"</span> <span class="sh_symbol">:</span> <span class="sh_string">"shanghai"</span><span class="sh_symbol">,</span> <span class="sh_string">"marry"</span> <span class="sh_symbol">:</span> <span class="sh_string">"true"</span> <span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badf7b720cdd1574b851f18"</span><span class="sh_symbol">),</span> <span class="sh_string">"name"</span> <span class="sh_symbol">:</span> <span class="sh_string">"lisi"</span><span class="sh_symbol">,</span> <span class="sh_string">"age"</span> <span class="sh_symbol">:</span> <span class="sh_number">35</span><span class="sh_symbol">,</span> <span class="sh_string">"addr"</span> <span class="sh_symbol">:</span> <span class="sh_string">"beijing"</span><span class="sh_symbol">,</span> <span class="sh_string">"marry"</span> <span class="sh_symbol">:</span> <span class="sh_string">"false"</span> <span class="sh_cbracket">}</span></li><li><span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt; db.t1.save({name:"zhangsan",addr:"shanghai",marry:"true"})
WriteResult({ "nInserted" : 1 })

&gt; db.t1.save({name:"lisi",age:35,addr:"beijing",marry:"false"})
WriteResult({ "nInserted" : 1 })

&gt; db.t1.find()
{ "_id" : ObjectId("5badf71520cdd1574b851f16"), "name" : "bob", "work" : null }
{ "_id" : 9, "name" : "jerry", "work" : null }
{ "_id" : ObjectId("5badf7b020cdd1574b851f17"), "name" : "zhangsan", "addr" : "shanghai", "marry" : "true" }
{ "_id" : ObjectId("5badf7b720cdd1574b851f18"), "name" : "lisi", "age" : 35, "addr" : "beijing", "marry" : "false" }
&gt;
</pre></div></div>
      <p>3）数值：shell默认使用64为浮点型数值，{“x”：3.14}或{“x”：3}，对于整型值，可以使用NumberInt（4字节符号整数）或NumberLong（8字节符号整数），{“x”:NumberInt(“3”)}{“x”:NumberLong(“3”)}</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>name<span class="sh_symbol">:</span><span class="sh_string">"alice"</span><span class="sh_symbol">,</span>woker<span class="sh_symbol">:</span><span class="sh_string">"gcs"</span><span class="sh_symbol">,</span>pay<span class="sh_symbol">:</span><span class="sh_number">28888.88</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">find</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>pay<span class="sh_symbol">:</span><span class="sh_number">28888.88</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badf80f20cdd1574b851f19"</span><span class="sh_symbol">),</span> <span class="sh_string">"name"</span> <span class="sh_symbol">:</span> <span class="sh_string">"alice"</span><span class="sh_symbol">,</span> <span class="sh_string">"woker"</span> <span class="sh_symbol">:</span> <span class="sh_string">"gcs"</span><span class="sh_symbol">,</span> <span class="sh_string">"pay"</span> <span class="sh_symbol">:</span> <span class="sh_number">28888.88</span> <span class="sh_cbracket">}</span></li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>name<span class="sh_symbol">:</span><span class="sh_string">"lilei"</span><span class="sh_symbol">,</span>woker<span class="sh_symbol">:</span><span class="sh_string">"cxy"</span><span class="sh_symbol">,</span>pay<span class="sh_symbol">:</span><span class="sh_number">28000</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_symbol">&gt;</span>  db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">find</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>pay<span class="sh_symbol">:</span><span class="sh_number">28000</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badf81f20cdd1574b851f1a"</span><span class="sh_symbol">),</span> <span class="sh_string">"name"</span> <span class="sh_symbol">:</span> <span class="sh_string">"lilei"</span><span class="sh_symbol">,</span> <span class="sh_string">"woker"</span> <span class="sh_symbol">:</span> <span class="sh_string">"cxy"</span><span class="sh_symbol">,</span> <span class="sh_string">"pay"</span> <span class="sh_symbol">:</span> <span class="sh_number">28000</span> <span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt; db.t1.save({name:"alice",woker:"gcs",pay:28888.88})
WriteResult({ "nInserted" : 1 })
&gt; db.t1.find({pay:28888.88})
{ "_id" : ObjectId("5badf80f20cdd1574b851f19"), "name" : "alice", "woker" : "gcs", "pay" : 28888.88 }

&gt; db.t1.save({name:"lilei",woker:"cxy",pay:28000})
WriteResult({ "nInserted" : 1 })
&gt;  db.t1.find({pay:28000})
{ "_id" : ObjectId("5badf81f20cdd1574b851f1a"), "name" : "lilei", "woker" : "cxy", "pay" : 28000 }
</pre></div></div>
      <p>4）字符串：UTF-8字符串都可以表示为字符串类型的数据，{“x”：“呵呵”}</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>name<span class="sh_symbol">:</span><span class="sh_string">"hehe"</span><span class="sh_symbol">,</span>woker<span class="sh_symbol">:</span><span class="sh_keyword">null</span><span class="sh_symbol">,</span>pay<span class="sh_symbol">:</span><span class="sh_keyword">null</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>name<span class="sh_symbol">:</span><span class="sh_string">"呵呵"</span><span class="sh_symbol">,</span>woker<span class="sh_symbol">:</span><span class="sh_string">"没有"</span><span class="sh_symbol">,</span>pay<span class="sh_symbol">:</span><span class="sh_string">"没有"</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt; db.t1.save({name:"hehe",woker:null,pay:null})
WriteResult({ "nInserted" : 1 })
&gt; db.t1.save({name:"呵呵",woker:"没有",pay:"没有"})
WriteResult({ "nInserted" : 1 })
</pre></div></div>
      <p>5）日期:日期被存储为自新纪元依赖经过的毫秒数，不存储时区，{“x”:new Date()}</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>name<span class="sh_symbol">:</span><span class="sh_string">"bobo"</span><span class="sh_symbol">,</span>wokertime<span class="sh_symbol">:</span><span class="sh_keyword">new</span> <span class="sh_predef_func">Date</span><span class="sh_symbol">()</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">find</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>name<span class="sh_symbol">:</span><span class="sh_string">"bobo"</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badf8ff6827555e3fd8680f"</span><span class="sh_symbol">),</span> <span class="sh_string">"name"</span> <span class="sh_symbol">:</span> <span class="sh_string">"bobo"</span><span class="sh_symbol">,</span> <span class="sh_string">"wokertime"</span> <span class="sh_symbol">:</span> <span class="sh_function">ISODate</span><span class="sh_symbol">(</span><span class="sh_string">"2018-09-28T09:48:47.437Z"</span><span class="sh_symbol">)</span> <span class="sh_cbracket">}</span></li><li><span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt; db.t1.save({name:"bobo",wokertime:new Date()})
WriteResult({ "nInserted" : 1 })
&gt; db.t1.find({name:"bobo"})
{ "_id" : ObjectId("5badf8ff6827555e3fd8680f"), "name" : "bobo", "wokertime" : ISODate("2018-09-28T09:48:47.437Z") }
&gt;
</pre></div></div>
      <p>6）正则表达式：查询时，使用正则表达式作为限定条件，语法与JavaScript的正则表达式相同，{“x”:/[abc]/}</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>procname<span class="sh_symbol">:</span><span class="sh_string">"php"</span><span class="sh_symbol">,</span>code<span class="sh_symbol">:</span><span class="sh_regexp">/abc$/</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_symbol">&gt;</span>  db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>procname<span class="sh_symbol">:</span><span class="sh_string">"php"</span><span class="sh_symbol">,</span>code<span class="sh_symbol">:</span><span class="sh_regexp">/[a-z]/</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>procname<span class="sh_symbol">:</span><span class="sh_string">"java"</span><span class="sh_symbol">,</span>code<span class="sh_symbol">:</span><span class="sh_regexp">/[a-z]/</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">find</span><span class="sh_symbol">()</span></li><li><span class="sh_symbol">...</span></li><li><span class="sh_symbol">...</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badf93b6827555e3fd86810"</span><span class="sh_symbol">),</span> <span class="sh_string">"procname"</span> <span class="sh_symbol">:</span> <span class="sh_string">"php"</span><span class="sh_symbol">,</span> <span class="sh_string">"code"</span> <span class="sh_symbol">:</span> <span class="sh_regexp">/abc$/</span> <span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badf9426827555e3fd86811"</span><span class="sh_symbol">),</span> <span class="sh_string">"procname"</span> <span class="sh_symbol">:</span> <span class="sh_string">"php"</span><span class="sh_symbol">,</span> <span class="sh_string">"code"</span> <span class="sh_symbol">:</span> <span class="sh_regexp">/[a-z]/</span> <span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badf9496827555e3fd86812"</span><span class="sh_symbol">),</span> <span class="sh_string">"procname"</span> <span class="sh_symbol">:</span> <span class="sh_string">"java"</span><span class="sh_symbol">,</span> <span class="sh_string">"code"</span> <span class="sh_symbol">:</span> <span class="sh_regexp">/[a-z]/</span> <span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt; db.t1.save({procname:"php",code:/abc$/})
WriteResult({ "nInserted" : 1 })
&gt;  db.t1.save({procname:"php",code:/[a-z]/})
WriteResult({ "nInserted" : 1 })
&gt; db.t1.save({procname:"java",code:/[a-z]/})
WriteResult({ "nInserted" : 1 })
&gt; db.t1.find()
...
...
{ "_id" : ObjectId("5badf93b6827555e3fd86810"), "procname" : "php", "code" : /abc$/ }
{ "_id" : ObjectId("5badf9426827555e3fd86811"), "procname" : "php", "code" : /[a-z]/ }
{ "_id" : ObjectId("5badf9496827555e3fd86812"), "procname" : "java", "code" : /[a-z]/ }
</pre></div></div>
      <p>7）数组：数据列表或数据集可以表示为数组，{“x”： [“a“，“b”,”c”]}，一个字段有多个值</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>name<span class="sh_symbol">:</span><span class="sh_string">"jerry"</span><span class="sh_symbol">,</span>email<span class="sh_symbol">:[</span><span class="sh_string">"plj@163.com"</span><span class="sh_symbol">,</span><span class="sh_string">"lij@yahoo.net"</span><span class="sh_symbol">,</span><span class="sh_string">"lij@tedu"</span><span class="sh_symbol">]</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">find</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>name<span class="sh_symbol">:</span><span class="sh_string">"jerry"</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_number">9</span><span class="sh_symbol">,</span> <span class="sh_string">"name"</span> <span class="sh_symbol">:</span> <span class="sh_string">"jerry"</span><span class="sh_symbol">,</span> <span class="sh_string">"work"</span> <span class="sh_symbol">:</span> <span class="sh_keyword">null</span> <span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badf9976827555e3fd86813"</span><span class="sh_symbol">),</span> <span class="sh_string">"name"</span> <span class="sh_symbol">:</span> <span class="sh_string">"jerry"</span><span class="sh_symbol">,</span> <span class="sh_string">"email"</span> <span class="sh_symbol">:</span> <span class="sh_symbol">[</span> <span class="sh_string">"plj@163.com"</span><span class="sh_symbol">,</span> <span class="sh_string">"lij@yahoo.net"</span><span class="sh_symbol">,</span> <span class="sh_string">"lij@tedu"</span> <span class="sh_symbol">]</span> <span class="sh_cbracket">}</span></li><li><span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt; db.t1.save({name:"jerry",email:["plj@163.com","lij@yahoo.net","lij@tedu"]})
WriteResult({ "nInserted" : 1 })
&gt; db.t1.find({name:"jerry"})
{ "_id" : 9, "name" : "jerry", "work" : null }
{ "_id" : ObjectId("5badf9976827555e3fd86813"), "name" : "jerry", "email" : [ "plj@163.com", "lij@yahoo.net", "lij@tedu" ] }
&gt;
</pre></div></div>
      <p>8）内嵌文档：文档可以嵌套其他文档，被嵌套的文档作为值来处理，{“x”:{“y”:3 }}</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>book<span class="sh_symbol">:</span> <span class="sh_cbracket">{</span>zuozhe<span class="sh_symbol">:</span><span class="sh_string">"dmy"</span><span class="sh_symbol">,</span>bname<span class="sh_symbol">:</span><span class="sh_string">"yuweizhidao"</span><span class="sh_symbol">,</span>jiaqian<span class="sh_symbol">:</span><span class="sh_number">69</span><span class="sh_symbol">,</span>version<span class="sh_symbol">:</span><span class="sh_number">2.0</span> <span class="sh_cbracket">}}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">find</span><span class="sh_symbol">()</span></li><li><span class="sh_symbol">...</span></li><li><span class="sh_symbol">...</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badfa4a6827555e3fd86814"</span><span class="sh_symbol">),</span> <span class="sh_string">"book"</span> <span class="sh_symbol">:</span> <span class="sh_cbracket">{</span> <span class="sh_string">"zuozhe"</span> <span class="sh_symbol">:</span> <span class="sh_string">"dmy"</span><span class="sh_symbol">,</span> <span class="sh_string">"bname"</span> <span class="sh_symbol">:</span> <span class="sh_string">"yuweizhidao"</span><span class="sh_symbol">,</span> <span class="sh_string">"jiaqian"</span> <span class="sh_symbol">:</span> <span class="sh_number">69</span><span class="sh_symbol">,</span> <span class="sh_string">"version"</span> <span class="sh_symbol">:</span> <span class="sh_number">2</span> <span class="sh_cbracket">}</span> <span class="sh_cbracket">}</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt; db.t1.save({book: {zuozhe:"dmy",bname:"yuweizhidao",jiaqian:69,version:2.0 }})
WriteResult({ "nInserted" : 1 })
&gt; db.t1.find()
...
...
{ "_id" : ObjectId("5badfa4a6827555e3fd86814"), "book" : { "zuozhe" : "dmy", "bname" : "yuweizhidao", "jiaqian" : 69, "version" : 2 } }
</pre></div></div>
      <p>9） 对象id：对象id是一个12字节的字符串，是文档的唯一标识，{“x”: objectId() }</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>stunum<span class="sh_symbol">:</span><span class="sh_function">ObjectId</span><span class="sh_symbol">(),</span>name<span class="sh_symbol">:</span><span class="sh_string">"yaya"</span><span class="sh_symbol">,</span><span class="sh_keyword">class</span><span class="sh_symbol">:</span><span class="sh_string">"nsd"</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">find</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>name<span class="sh_symbol">:</span><span class="sh_string">"yaya"</span><span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badfa966827555e3fd86816"</span><span class="sh_symbol">),</span> <span class="sh_string">"stunum"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badfa966827555e3fd86815"</span><span class="sh_symbol">),</span> <span class="sh_string">"name"</span> <span class="sh_symbol">:</span> <span class="sh_string">"yaya"</span><span class="sh_symbol">,</span> <span class="sh_string">"class"</span> <span class="sh_symbol">:</span> <span class="sh_string">"nsd"</span> <span class="sh_cbracket">}</span></li><li><span class="sh_comment">//自己定义一个id字段，一般情况下都用内置的id字段，相当于mysql里的primary key auto_increment</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt; db.t1.save({stunum:ObjectId(),name:"yaya",class:"nsd"})
WriteResult({ "nInserted" : 1 })
&gt; db.t1.find({name:"yaya"})
{ "_id" : ObjectId("5badfa966827555e3fd86816"), "stunum" : ObjectId("5badfa966827555e3fd86815"), "name" : "yaya", "class" : "nsd" }
//自己定义一个id字段，一般情况下都用内置的id字段，相当于mysql里的primary key auto_increment
</pre></div></div>
      <p>10）二进制数据：二进制数据是一个任意字节的字符串。它不能直接在shell中使用。如果要将非utf-字符保存到数据库中，二进制数据是唯一的方式。</p>
      <p>11）代码：查询和文档中可以包括任何JavaScript代码，{“x”:function(){/*…*/}}</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>lname<span class="sh_symbol">:</span><span class="sh_string">"html"</span><span class="sh_symbol">,</span>codecript<span class="sh_symbol">:</span><span class="sh_keyword">function</span><span class="sh_symbol">()</span><span class="sh_cbracket">{</span><span class="sh_comment">/*...*/</span><span class="sh_cbracket">}}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">save</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span>lname<span class="sh_symbol">:</span><span class="sh_string">"html"</span><span class="sh_symbol">,</span>codecript<span class="sh_symbol">:</span><span class="sh_keyword">function</span><span class="sh_symbol">()</span><span class="sh_cbracket">{</span><span class="sh_comment">/*&lt;html&gt;&lt;h1&gt;abc&lt;/h1&gt;&lt;/html&gt;*/</span><span class="sh_cbracket">}}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nInserted"</span> <span class="sh_symbol">:</span> <span class="sh_number">1</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">find</span><span class="sh_symbol">()</span></li><li><span class="sh_symbol">...</span></li><li><span class="sh_symbol">...</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badfd626827555e3fd86817"</span><span class="sh_symbol">),</span> <span class="sh_string">"lname"</span> <span class="sh_symbol">:</span> <span class="sh_string">"html"</span><span class="sh_symbol">,</span> <span class="sh_string">"codecript"</span> <span class="sh_symbol">:</span> <span class="sh_cbracket">{</span> <span class="sh_string">"code"</span> <span class="sh_symbol">:</span> <span class="sh_string">"function (){/*...*/}"</span> <span class="sh_cbracket">}</span> <span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">{</span> <span class="sh_string">"_id"</span> <span class="sh_symbol">:</span> <span class="sh_function">ObjectId</span><span class="sh_symbol">(</span><span class="sh_string">"5badfd6a6827555e3fd86818"</span><span class="sh_symbol">),</span> <span class="sh_string">"lname"</span> <span class="sh_symbol">:</span> <span class="sh_string">"html"</span><span class="sh_symbol">,</span> <span class="sh_string">"codecript"</span> <span class="sh_symbol">:</span> <span class="sh_cbracket">{</span> <span class="sh_string">"code"</span> <span class="sh_symbol">:</span> <span class="sh_string">"function (){/*&lt;html&gt;&lt;h1&gt;abc&lt;/h1&gt;&lt;/html&gt;*/}"</span> <span class="sh_cbracket">}</span> <span class="sh_cbracket">}</span></li><li><span class="sh_symbol">&gt;</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">&gt; db.t1.save({lname:"html",codecript:function(){/*...*/}})
WriteResult({ "nInserted" : 1 })
&gt; db.t1.save({lname:"html",codecript:function(){/*&lt;html&gt;&lt;h1&gt;abc&lt;/h1&gt;&lt;/html&gt;*/}})
WriteResult({ "nInserted" : 1 })
&gt; db.t1.find()
...
...
{ "_id" : ObjectId("5badfd626827555e3fd86817"), "lname" : "html", "codecript" : { "code" : "function (){/*...*/}" } }
{ "_id" : ObjectId("5badfd6a6827555e3fd86818"), "lname" : "html", "codecript" : { "code" : "function (){/*&lt;html&gt;&lt;h1&gt;abc&lt;/h1&gt;&lt;/html&gt;*/}" } }
&gt;
</pre></div></div>
      <a name="case3">
      </a>
      <h2>3 案例3：数据导入导出/备份/恢复</h2>
      <h3>3.1 问题</h3>
      <ul class="list">
        <li>要求如下：
</li>
        <li>练习数据导入导出
</li>
        <li>练习数据备份恢复
</li>
      </ul>
      <h3>3.2 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：数据备份与恢复</p>
      <p>1）数据备份</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li> <span class="sh_symbol">[</span>root@mongodb51 <span class="sh_symbol">~]</span># mongodump <span class="sh_symbol">--</span>host  <span class="sh_number">192.168.4.51</span> <span class="sh_symbol">--</span>port <span class="sh_number">27077</span></li><li><span class="sh_comment">//不指定备份哪个库，默认备份所有，不指定目录，自动生成dump目录，备份的数据在这个里面</span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">14</span><span class="sh_symbol">:</span><span class="sh_number">12.585+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;writing admin<span class="sh_symbol">.</span>system<span class="sh_symbol">.</span>version to </li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">14</span><span class="sh_symbol">:</span><span class="sh_number">12.586+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;done dumping admin<span class="sh_symbol">.</span>system<span class="sh_symbol">.</span><span class="sh_function">version</span> <span class="sh_symbol">(</span><span class="sh_number">1</span> document<span class="sh_symbol">)</span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">14</span><span class="sh_symbol">:</span><span class="sh_number">12.586+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;writing ddsdb<span class="sh_symbol">.</span>t1 to </li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">14</span><span class="sh_symbol">:</span><span class="sh_number">12.586+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;writing test<span class="sh_symbol">.</span>t1 to </li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">14</span><span class="sh_symbol">:</span><span class="sh_number">12.586+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;writing ddsdb<span class="sh_symbol">.</span>col to </li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">14</span><span class="sh_symbol">:</span><span class="sh_number">12.587+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;done dumping ddsdb<span class="sh_symbol">.</span><span class="sh_function">t1</span> <span class="sh_symbol">(</span><span class="sh_number">17</span> documents<span class="sh_symbol">)</span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">14</span><span class="sh_symbol">:</span><span class="sh_number">12.588+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;done dumping test<span class="sh_symbol">.</span><span class="sh_function">t1</span> <span class="sh_symbol">(</span><span class="sh_number">1</span> document<span class="sh_symbol">)</span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">14</span><span class="sh_symbol">:</span><span class="sh_number">12.588+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;done dumping ddsdb<span class="sh_symbol">.</span><span class="sh_function">col</span> <span class="sh_symbol">(</span><span class="sh_number">0</span> documents<span class="sh_symbol">)</span></li><li><span class="sh_symbol">[</span>root@mongodb51 <span class="sh_symbol">~]</span># ls</li><li>dump</li><li><span class="sh_symbol">[</span>root@mongodb51 <span class="sh_symbol">~]</span># bsondump <span class="sh_normal">dump</span><span class="sh_symbol">/</span><span class="sh_normal">ddsdb</span><span class="sh_symbol">/</span>t1<span class="sh_symbol">.</span>bson&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//查看bson文件内容</span></li><li><span class="sh_cbracket">{</span><span class="sh_string">"_id"</span><span class="sh_symbol">:</span><span class="sh_cbracket">{</span><span class="sh_string">"$oid"</span><span class="sh_symbol">:</span><span class="sh_string">"5badf71520cdd1574b851f16"</span><span class="sh_cbracket">}</span><span class="sh_symbol">,</span><span class="sh_string">"name"</span><span class="sh_symbol">:</span><span class="sh_string">"bob"</span><span class="sh_symbol">,</span><span class="sh_string">"work"</span><span class="sh_symbol">:</span><span class="sh_keyword">null</span><span class="sh_cbracket">}</span></li><li><span class="sh_cbracket">{</span><span class="sh_string">"_id"</span><span class="sh_symbol">:</span><span class="sh_number">9.0</span><span class="sh_symbol">,</span><span class="sh_string">"name"</span><span class="sh_symbol">:</span><span class="sh_string">"jerry"</span><span class="sh_symbol">,</span><span class="sh_string">"work"</span><span class="sh_symbol">:</span><span class="sh_keyword">null</span><span class="sh_cbracket">}</span></li><li><span class="sh_symbol">...</span></li><li><span class="sh_symbol">...</span></li><li><span class="sh_cbracket">{</span><span class="sh_string">"_id"</span><span class="sh_symbol">:</span><span class="sh_cbracket">{</span><span class="sh_string">"$oid"</span><span class="sh_symbol">:</span><span class="sh_string">"5badfd626827555e3fd86817"</span><span class="sh_cbracket">}</span><span class="sh_symbol">,</span><span class="sh_string">"lname"</span><span class="sh_symbol">:</span><span class="sh_string">"html"</span><span class="sh_symbol">,</span><span class="sh_string">"codecript"</span><span class="sh_symbol">:</span><span class="sh_cbracket">{</span><span class="sh_string">"$code"</span><span class="sh_symbol">:</span><span class="sh_string">"function (){/*...*/}"</span><span class="sh_cbracket">}}</span></li><li><span class="sh_cbracket">{</span><span class="sh_string">"_id"</span><span class="sh_symbol">:</span><span class="sh_cbracket">{</span><span class="sh_string">"$oid"</span><span class="sh_symbol">:</span><span class="sh_string">"5badfd6a6827555e3fd86818"</span><span class="sh_cbracket">}</span><span class="sh_symbol">,</span><span class="sh_string">"lname"</span><span class="sh_symbol">:</span><span class="sh_string">"html"</span><span class="sh_symbol">,</span><span class="sh_string">"codecript"</span><span class="sh_symbol">:</span><span class="sh_cbracket">{</span><span class="sh_string">"$code"</span><span class="sh_symbol">:</span><span class="sh_string">"function (){/*</span><span class="sh_specialchar">\u</span><span class="sh_string">003chtml</span><span class="sh_specialchar">\u</span><span class="sh_string">003e</span><span class="sh_specialchar">\u</span><span class="sh_string">003ch1</span><span class="sh_specialchar">\u</span><span class="sh_string">003eabc</span><span class="sh_specialchar">\u</span><span class="sh_string">003c/h1</span><span class="sh_specialchar">\u</span><span class="sh_string">003e</span><span class="sh_specialchar">\u</span><span class="sh_string">003c/html</span><span class="sh_specialchar">\u</span><span class="sh_string">003e*/}"</span><span class="sh_cbracket">}}</span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">15</span><span class="sh_symbol">:</span><span class="sh_number">45.948+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_number">17</span> objects found</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;"> [root@mongodb51 ~]# mongodump --host  192.168.4.51 --port 27077
//不指定备份哪个库，默认备份所有，不指定目录，自动生成dump目录，备份的数据在这个里面
2018-09-28T18:14:12.585+0800	writing admin.system.version to 
2018-09-28T18:14:12.586+0800	done dumping admin.system.version (1 document)
2018-09-28T18:14:12.586+0800	writing ddsdb.t1 to 
2018-09-28T18:14:12.586+0800	writing test.t1 to 
2018-09-28T18:14:12.586+0800	writing ddsdb.col to 
2018-09-28T18:14:12.587+0800	done dumping ddsdb.t1 (17 documents)
2018-09-28T18:14:12.588+0800	done dumping test.t1 (1 document)
2018-09-28T18:14:12.588+0800	done dumping ddsdb.col (0 documents)
[root@mongodb51 ~]# ls
dump
[root@mongodb51 ~]# bsondump dump/ddsdb/t1.bson		//查看bson文件内容
{"_id":{"$oid":"5badf71520cdd1574b851f16"},"name":"bob","work":null}
{"_id":9.0,"name":"jerry","work":null}
...
...
{"_id":{"$oid":"5badfd626827555e3fd86817"},"lname":"html","codecript":{"$code":"function (){/*...*/}"}}
{"_id":{"$oid":"5badfd6a6827555e3fd86818"},"lname":"html","codecript":{"$code":"function (){/*\u003chtml\u003e\u003ch1\u003eabc\u003c/h1\u003e\u003c/html\u003e*/}"}}
2018-09-28T18:15:45.948+0800	17 objects found

</pre></div></div>
      <p>备份时指定备份的库和备份目录</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@mongodb51 <span class="sh_symbol">~]</span># mongodump <span class="sh_symbol">--</span>host  <span class="sh_number">192.168.4.51</span> <span class="sh_symbol">--</span>port <span class="sh_number">27077</span>  <span class="sh_symbol">-</span>d  ddsdb <span class="sh_symbol">-</span><span class="sh_normal">o </span><span class="sh_symbol">/</span><span class="sh_normal">root</span><span class="sh_symbol">/</span>bbsdb</li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">23</span><span class="sh_symbol">:</span><span class="sh_number">30.389+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;writing ddsdb<span class="sh_symbol">.</span>t1 to </li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">23</span><span class="sh_symbol">:</span><span class="sh_number">30.389+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;writing ddsdb<span class="sh_symbol">.</span>col to </li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">23</span><span class="sh_symbol">:</span><span class="sh_number">30.391+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;done dumping ddsdb<span class="sh_symbol">.</span><span class="sh_function">t1</span> <span class="sh_symbol">(</span><span class="sh_number">17</span> documents<span class="sh_symbol">)</span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">23</span><span class="sh_symbol">:</span><span class="sh_number">30.391+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;done dumping ddsdb<span class="sh_symbol">.</span><span class="sh_function">col</span> <span class="sh_symbol">(</span><span class="sh_number">0</span> documents<span class="sh_symbol">)</span> </li><li><span class="sh_comment">//-d备哪个库，-o指定备份的目录，备份bbsdb库里的所有到/root/bbsdb</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@mongodb51 ~]# mongodump --host  192.168.4.51 --port 27077  -d  ddsdb -o /root/bbsdb
2018-09-28T18:23:30.389+0800	writing ddsdb.t1 to 
2018-09-28T18:23:30.389+0800	writing ddsdb.col to 
2018-09-28T18:23:30.391+0800	done dumping ddsdb.t1 (17 documents)
2018-09-28T18:23:30.391+0800	done dumping ddsdb.col (0 documents) 
//-d备哪个库，-o指定备份的目录，备份bbsdb库里的所有到/root/bbsdb
</pre></div></div>
      <p>只备份ddsdb库里的集合t1</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@mongodb51 <span class="sh_symbol">~]</span>#  mongodump <span class="sh_symbol">--</span>host  <span class="sh_number">192.168.4.51</span> <span class="sh_symbol">--</span>port <span class="sh_number">27077</span>  <span class="sh_symbol">-</span>d  ddsdb <span class="sh_symbol">-</span>c t1 <span class="sh_symbol">-</span><span class="sh_normal">o </span><span class="sh_symbol">/</span><span class="sh_normal">root</span><span class="sh_symbol">/</span>bbsdb<span class="sh_symbol">.</span>t </li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">19</span><span class="sh_symbol">:</span><span class="sh_number">00.210+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;writing ddsdb<span class="sh_symbol">.</span>t1 to </li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">19</span><span class="sh_symbol">:</span><span class="sh_number">00.211+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;done dumping ddsdb<span class="sh_symbol">.</span><span class="sh_function">t1</span> <span class="sh_symbol">(</span><span class="sh_number">17</span> documents<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@mongodb51 ~]#  mongodump --host  192.168.4.51 --port 27077  -d  ddsdb -c t1 -o /root/bbsdb.t 
2018-09-28T18:19:00.210+0800	writing ddsdb.t1 to 
2018-09-28T18:19:00.211+0800	done dumping ddsdb.t1 (17 documents)
</pre></div></div>
      <p>2）恢复数据</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@mongodb51 <span class="sh_symbol">~]</span># mongo <span class="sh_symbol">--</span>host <span class="sh_number">192.168.4.51</span> <span class="sh_symbol">--</span>port <span class="sh_number">27077</span></li><li><span class="sh_symbol">&gt;</span> show tables<span class="sh_symbol">;</span></li><li>col</li><li>t1</li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">remove</span><span class="sh_symbol">(</span><span class="sh_cbracket">{}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nRemoved"</span> <span class="sh_symbol">:</span> <span class="sh_number">17</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_symbol">&gt;</span>exit</li><li><span class="sh_symbol">[</span>root@mongodb51 <span class="sh_symbol">~]</span># mongorestore <span class="sh_symbol">--</span>host  <span class="sh_number">192.168.4.51</span> <span class="sh_symbol">--</span>port <span class="sh_number">27077</span>  <span class="sh_symbol">-</span>d  <span class="sh_normal">ddsdb  </span><span class="sh_symbol">/</span><span class="sh_normal">root</span><span class="sh_symbol">/</span>bbsdb<span class="sh_symbol">.</span><span class="sh_normal">t</span><span class="sh_symbol">/</span><span class="sh_normal">ddsdb</span><span class="sh_symbol">/</span></li><li><span class="sh_comment">//-d  ddsdb恢复到数据库的目录，从/root/bbsdb.t1/ddsdb/目录恢复</span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">26</span><span class="sh_symbol">:</span><span class="sh_number">16.889+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;the <span class="sh_symbol">--</span>db and <span class="sh_symbol">--</span>collection args should only be used when restoring from a BSON file<span class="sh_symbol">.</span> Other uses are deprecated and will not exist <span class="sh_keyword">in</span> the future<span class="sh_symbol">;</span> use <span class="sh_symbol">--</span>nsInclude instead</li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">26</span><span class="sh_symbol">:</span><span class="sh_number">16.890+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;building a list of collections to restore <span class="sh_normal">from </span><span class="sh_symbol">/</span><span class="sh_normal">root</span><span class="sh_symbol">/</span>bbsdb<span class="sh_symbol">.</span><span class="sh_normal">t</span><span class="sh_symbol">/</span>ddsdb dir</li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">26</span><span class="sh_symbol">:</span><span class="sh_number">16.891+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;reading metadata <span class="sh_keyword">for</span> ddsdb<span class="sh_symbol">.</span>t1 <span class="sh_normal">from </span><span class="sh_symbol">/</span><span class="sh_normal">root</span><span class="sh_symbol">/</span>bbsdb<span class="sh_symbol">.</span><span class="sh_normal">t</span><span class="sh_symbol">/</span><span class="sh_normal">ddsdb</span><span class="sh_symbol">/</span>t1<span class="sh_symbol">.</span>metadata<span class="sh_symbol">.</span>json</li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">26</span><span class="sh_symbol">:</span><span class="sh_number">16.891+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;restoring ddsdb<span class="sh_symbol">.</span>t1 <span class="sh_normal">from </span><span class="sh_symbol">/</span><span class="sh_normal">root</span><span class="sh_symbol">/</span>bbsdb<span class="sh_symbol">.</span><span class="sh_normal">t</span><span class="sh_symbol">/</span><span class="sh_normal">ddsdb</span><span class="sh_symbol">/</span>t1<span class="sh_symbol">.</span>bson</li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">26</span><span class="sh_symbol">:</span><span class="sh_number">16.893+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;no indexes to restore</li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">26</span><span class="sh_symbol">:</span><span class="sh_number">16.893+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;finished restoring ddsdb<span class="sh_symbol">.</span><span class="sh_function">t1</span> <span class="sh_symbol">(</span><span class="sh_number">17</span> documents<span class="sh_symbol">)</span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">26</span><span class="sh_symbol">:</span><span class="sh_number">16.893+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;done</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@mongodb51 ~]# mongo --host 192.168.4.51 --port 27077
&gt; show tables;
col
t1
&gt; db.t1.remove({})
WriteResult({ "nRemoved" : 17 })
&gt;exit
[root@mongodb51 ~]# mongorestore --host  192.168.4.51 --port 27077  -d  ddsdb  /root/bbsdb.t/ddsdb/
//-d  ddsdb恢复到数据库的目录，从/root/bbsdb.t1/ddsdb/目录恢复
2018-09-28T18:26:16.889+0800	the --db and --collection args should only be used when restoring from a BSON file. Other uses are deprecated and will not exist in the future; use --nsInclude instead
2018-09-28T18:26:16.890+0800	building a list of collections to restore from /root/bbsdb.t/ddsdb dir
2018-09-28T18:26:16.891+0800	reading metadata for ddsdb.t1 from /root/bbsdb.t/ddsdb/t1.metadata.json
2018-09-28T18:26:16.891+0800	restoring ddsdb.t1 from /root/bbsdb.t/ddsdb/t1.bson
2018-09-28T18:26:16.893+0800	no indexes to restore
2018-09-28T18:26:16.893+0800	finished restoring ddsdb.t1 (17 documents)
2018-09-28T18:26:16.893+0800	done
</pre></div></div>
      <p>步骤二：数据的导入导出</p>
      <p>1）导出</p>
      <p>用csv的格式导出</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li> <span class="sh_symbol">[</span>root@mongodb51 <span class="sh_symbol">~]</span># mongoexport  <span class="sh_symbol">--</span>host  <span class="sh_number">192.168.4.51</span> <span class="sh_symbol">--</span>port <span class="sh_number">27077</span>  <span class="sh_symbol">-</span>d  ddsdb  <span class="sh_symbol">-</span>c t1 <span class="sh_symbol">-</span>f name <span class="sh_symbol">--</span>type<span class="sh_symbol">=</span>csv    <span class="sh_symbol">-</span><span class="sh_normal">o </span><span class="sh_symbol">/</span><span class="sh_normal">root</span><span class="sh_symbol">/</span>lig1<span class="sh_symbol">.</span>csv</li><li><span class="sh_comment">//导出csv格式，必须要指定导出的字段名 ，导出name字段 </span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">29</span><span class="sh_symbol">:</span><span class="sh_number">24.653+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;connected to<span class="sh_symbol">:</span> <span class="sh_number">192.168.4.51</span><span class="sh_symbol">:</span><span class="sh_number">27077</span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">29</span><span class="sh_symbol">:</span><span class="sh_number">24.654+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;exported <span class="sh_number">17</span> records</li><li><span class="sh_symbol">[</span>root@mongodb51 <span class="sh_symbol">~]</span># cat lig1<span class="sh_symbol">.</span>csv</li><li>name</li><li>bob</li><li>jerry</li><li>zhangsan</li><li>lisi</li><li>alice</li><li>lilei</li><li>hehe</li><li>呵呵</li><li>bobo</li><li><span style="display:none;">&nbsp;</span></li><li><span style="display:none;">&nbsp;</span></li><li><span style="display:none;">&nbsp;</span></li><li>jerry</li><li><span style="display:none;">&nbsp;</span></li><li>yaya</li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">[</span>root@mongodb51 <span class="sh_symbol">~]</span># mongoexport  <span class="sh_symbol">--</span>host  <span class="sh_number">192.168.4.51</span> <span class="sh_symbol">--</span>port <span class="sh_number">27077</span>  <span class="sh_symbol">-</span>d  ddsdb  <span class="sh_symbol">-</span>c t1 <span class="sh_symbol">-</span>q <span class="sh_string">'{name:"bob"}'</span> <span class="sh_symbol">-</span>f name<span class="sh_symbol">,</span>age <span class="sh_symbol">--</span>type<span class="sh_symbol">=</span>csv    <span class="sh_symbol">-</span><span class="sh_normal">o </span><span class="sh_symbol">/</span><span class="sh_normal">root</span><span class="sh_symbol">/</span>lig2<span class="sh_symbol">.</span>csv</li><li><span class="sh_comment">//从ddsdb的它1里导出名字为bob的name字段和age字段</span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">31</span><span class="sh_symbol">:</span><span class="sh_number">25.627+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;connected to<span class="sh_symbol">:</span> <span class="sh_number">192.168.4.51</span><span class="sh_symbol">:</span><span class="sh_number">27077</span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">31</span><span class="sh_symbol">:</span><span class="sh_number">25.628+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;exported <span class="sh_number">1</span> record</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;"> [root@mongodb51 ~]# mongoexport  --host  192.168.4.51 --port 27077  -d  ddsdb  -c t1 -f name --type=csv    -o /root/lig1.csv
//导出csv格式，必须要指定导出的字段名 ，导出name字段 
2018-09-28T18:29:24.653+0800	connected to: 192.168.4.51:27077
2018-09-28T18:29:24.654+0800	exported 17 records
[root@mongodb51 ~]# cat lig1.csv
name
bob
jerry
zhangsan
lisi
alice
lilei
hehe
呵呵
bobo



jerry

yaya

[root@mongodb51 ~]# mongoexport  --host  192.168.4.51 --port 27077  -d  ddsdb  -c t1 -q '{name:"bob"}' -f name,age --type=csv    -o /root/lig2.csv
//从ddsdb的它1里导出名字为bob的name字段和age字段
2018-09-28T18:31:25.627+0800	connected to: 192.168.4.51:27077
2018-09-28T18:31:25.628+0800	exported 1 record
</pre></div></div>
      <p>用json的格式导出</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@mongodb51 <span class="sh_symbol">~]</span># mongoexport  <span class="sh_symbol">--</span>host  <span class="sh_number">192.168.4.51</span> <span class="sh_symbol">--</span>port <span class="sh_number">27077</span> <span class="sh_symbol">-</span>d ddsdb <span class="sh_symbol">-</span>c t1 <span class="sh_symbol">--</span>type<span class="sh_symbol">=</span>json    <span class="sh_symbol">-</span><span class="sh_normal">o </span><span class="sh_symbol">/</span><span class="sh_normal">root</span><span class="sh_symbol">/</span>lig3<span class="sh_symbol">.</span>json</li><li><span class="sh_comment">//导出json格式</span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">33</span><span class="sh_symbol">:</span><span class="sh_number">13.349+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;connected to<span class="sh_symbol">:</span> <span class="sh_number">192.168.4.51</span><span class="sh_symbol">:</span><span class="sh_number">27077</span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">33</span><span class="sh_symbol">:</span><span class="sh_number">13.350+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;exported <span class="sh_number">17</span> records</li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">[</span>root@mongodb51 <span class="sh_symbol">~]</span># mongoexport  <span class="sh_symbol">--</span>host  <span class="sh_number">192.168.4.51</span> <span class="sh_symbol">--</span>port <span class="sh_number">27077</span> <span class="sh_symbol">-</span>d ddsdb <span class="sh_symbol">-</span>c t1 <span class="sh_symbol">-</span>f name <span class="sh_symbol">--</span>type<span class="sh_symbol">=</span>json    <span class="sh_symbol">-</span><span class="sh_normal">o </span><span class="sh_symbol">/</span><span class="sh_normal">root</span><span class="sh_symbol">/</span>lig4<span class="sh_symbol">.</span>json</li><li><span class="sh_comment">//指定列名导出，导出name字段</span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">33</span><span class="sh_symbol">:</span><span class="sh_number">35.914+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;connected to<span class="sh_symbol">:</span> <span class="sh_number">192.168.4.51</span><span class="sh_symbol">:</span><span class="sh_number">27077</span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">33</span><span class="sh_symbol">:</span><span class="sh_number">35.915+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;exported <span class="sh_number">17</span> records</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@mongodb51 ~]# mongoexport  --host  192.168.4.51 --port 27077 -d ddsdb -c t1 --type=json    -o /root/lig3.json
//导出json格式
2018-09-28T18:33:13.349+0800	connected to: 192.168.4.51:27077
2018-09-28T18:33:13.350+0800	exported 17 records

[root@mongodb51 ~]# mongoexport  --host  192.168.4.51 --port 27077 -d ddsdb -c t1 -f name --type=json    -o /root/lig4.json
//指定列名导出，导出name字段
2018-09-28T18:33:35.914+0800	connected to: 192.168.4.51:27077
2018-09-28T18:33:35.915+0800	exported 17 records
</pre></div></div>
      <p>2）导入</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@mongodb51 <span class="sh_symbol">~]</span># mongo <span class="sh_symbol">--</span>host <span class="sh_number">192.168.4.51</span> <span class="sh_symbol">--</span>port <span class="sh_number">27077</span></li><li><span class="sh_symbol">&gt;</span> use ddsdb</li><li>switched to db ddsdb</li><li><span class="sh_symbol">&gt;</span> show tables<span class="sh_symbol">;</span></li><li>col</li><li>t1</li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">remove</span><span class="sh_symbol">(</span><span class="sh_cbracket">{}</span><span class="sh_symbol">)</span></li><li><span class="sh_function">WriteResult</span><span class="sh_symbol">(</span><span class="sh_cbracket">{</span> <span class="sh_string">"nRemoved"</span> <span class="sh_symbol">:</span> <span class="sh_number">17</span> <span class="sh_cbracket">}</span><span class="sh_symbol">)</span></li><li><span class="sh_symbol">&gt;</span> exit</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@mongodb51 ~]# mongo --host 192.168.4.51 --port 27077
&gt; use ddsdb
switched to db ddsdb
&gt; show tables;
col
t1
&gt; db.t1.remove({})
WriteResult({ "nRemoved" : 17 })
&gt; exit
</pre></div></div>
      <p>用json的格式导入：表里要没有数据，不然导入不成功</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@mongodb51 <span class="sh_symbol">~]</span># mongoimport <span class="sh_symbol">--</span>host  <span class="sh_number">192.168.4.51</span> <span class="sh_symbol">--</span>port <span class="sh_number">27077</span> <span class="sh_symbol">-</span>d ddsdb <span class="sh_symbol">-</span>c t1 <span class="sh_symbol">--</span>type<span class="sh_symbol">=</span><span class="sh_normal">json       </span><span class="sh_symbol">/</span><span class="sh_normal">root</span><span class="sh_symbol">/</span>lig3<span class="sh_symbol">.</span>json</li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">35</span><span class="sh_symbol">:</span><span class="sh_number">22.341+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;connected to<span class="sh_symbol">:</span> <span class="sh_number">192.168.4.51</span><span class="sh_symbol">:</span><span class="sh_number">27077</span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">35</span><span class="sh_symbol">:</span><span class="sh_number">22.343+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;imported <span class="sh_number">17</span> documents</li><li><span style="display:none;">&nbsp;</span></li><li><span class="sh_symbol">[</span>root@mongodb51 <span class="sh_symbol">~]</span># mongo <span class="sh_symbol">--</span>host <span class="sh_number">192.168.4.51</span> <span class="sh_symbol">--</span>port <span class="sh_number">27077</span> </li><li><span class="sh_symbol">&gt;</span> use ddsdb</li><li>switched to db ddsdb</li><li><span class="sh_symbol">&gt;</span> db<span class="sh_symbol">.</span>t1<span class="sh_symbol">.</span><span class="sh_function">count</span><span class="sh_symbol">(</span><span class="sh_cbracket">{}</span><span class="sh_symbol">)</span></li><li><span class="sh_number">17</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@mongodb51 ~]# mongoimport --host  192.168.4.51 --port 27077 -d ddsdb -c t1 --type=json       /root/lig3.json
2018-09-28T18:35:22.341+0800	connected to: 192.168.4.51:27077
2018-09-28T18:35:22.343+0800	imported 17 documents

[root@mongodb51 ~]# mongo --host 192.168.4.51 --port 27077 
&gt; use ddsdb
switched to db ddsdb
&gt; db.t1.count({})
17
</pre></div></div>
      <p>用csv的格式导入：表里可以有数据</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/NOSQL/DAY04/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li><span class="sh_symbol">[</span>root@mongodb51 <span class="sh_symbol">~]</span># mongoimport <span class="sh_symbol">--</span>host  <span class="sh_number">192.168.4.51</span> <span class="sh_symbol">--</span>port <span class="sh_number">27077</span>  <span class="sh_symbol">-</span>d ddsdb <span class="sh_symbol">-</span>c t1   <span class="sh_symbol">--</span>headerline  <span class="sh_symbol">--</span>type<span class="sh_symbol">=</span><span class="sh_normal">csv </span><span class="sh_symbol">/</span><span class="sh_normal">root</span><span class="sh_symbol">/</span>lig1<span class="sh_symbol">.</span>csv</li><li><span class="sh_comment">//必须指定文件的列名，不然不成功 -f和--headerline不能一起用  --headerline：把第一行的字段隐藏即去掉文件列的标题name，不然标题也会导进去，导入时t1表可以不存在</span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">37</span><span class="sh_symbol">:</span><span class="sh_number">36.778+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;connected to<span class="sh_symbol">:</span> <span class="sh_number">192.168.4.51</span><span class="sh_symbol">:</span><span class="sh_number">27077</span></li><li><span class="sh_number">2018-09</span><span class="sh_symbol">-</span>28T18<span class="sh_symbol">:</span><span class="sh_number">37</span><span class="sh_symbol">:</span><span class="sh_number">36.779+0800</span>&nbsp;&nbsp;&nbsp;&nbsp;imported <span class="sh_number">11</span> documents</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">[root@mongodb51 ~]# mongoimport --host  192.168.4.51 --port 27077  -d ddsdb -c t1   --headerline  --type=csv /root/lig1.csv
//必须指定文件的列名，不然不成功 -f和--headerline不能一起用  --headerline：把第一行的字段隐藏即去掉文件列的标题name，不然标题也会导进去，导入时t1表可以不存在
2018-09-28T18:37:36.778+0800	connected to: 192.168.4.51:27077
2018-09-28T18:37:36.779+0800	imported 11 documents
</pre></div></div>
    </div>
  
</body></html>