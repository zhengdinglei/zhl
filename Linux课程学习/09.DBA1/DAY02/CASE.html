
<!-- saved from url=(0075)http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>CASE</title>
    
    <script type="text/javascript" src="./CASE_files/jquery.min.js">
    </script>
    <script type="text/javascript" src="./CASE_files/jquery.snippet.js">
    </script>
    <script type="text/javascript" src="./CASE_files/main.js">
    </script>
    <link type="text/css" href="./CASE_files/index.css" rel="Stylesheet">
    <link type="text/css" href="./CASE_files/jquery.snippet.css" rel="Stylesheet">
  </head>
  <body>
    <div class="source_style_case">
      <a name="page_top_case" id="top_anchor">
      </a><a id="link_top" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#page_top_case">Top</a>
      <h1>NSD DBA1 DAY02</h1>
      <ol class="index">
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#case1">修改表结构</a>
        </li>
        <li>
          <a href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#case2">MySQL索引创建与删除</a>
        </li>
      </ol>
      <a name="case1">
      </a>
      <h2>1 修改表结构</h2>
      <h3>1.1 问题</h3>
      <p>本案例要求熟悉MySQL库中表的字段修改，主要练习以下操作：</p>
      <ul class="list">
        <li>添加字段
</li>
        <li>修改字段名
</li>
        <li>修改字段类型
</li>
        <li>删除字段
</li>
      </ul>
      <h3>1.2 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：添加字段</p>
      <p>在studb中创建tea6表</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> CREATE TABLE studb<span class="sh_symbol">.</span><span class="sh_function">tea6</span><span class="sh_symbol">(</span>id <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> PRIMARY KEY<span class="sh_symbol">,</span></li><li>    <span class="sh_symbol">-&gt;</span> name <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> NOT NULL<span class="sh_symbol">,</span></li><li>    <span class="sh_symbol">-&gt;</span> age <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">)</span> NOT NULL</li><li>    <span class="sh_symbol">-&gt;</span> <span class="sh_symbol">);</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.34</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; CREATE TABLE studb.tea6(id int(4) PRIMARY KEY,
    -&gt; name varchar(4) NOT NULL,
    -&gt; age int(2) NOT NULL
    -&gt; );
Query OK, 0 rows affected (0.34 sec)
</pre></div></div>
      <p>为tea6表添加一个address字段</p>
      <p>添加前：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> DESC tea6<span class="sh_symbol">;</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> Field <span class="sh_symbol">|</span> Type       <span class="sh_symbol">|</span> Null <span class="sh_symbol">|</span> Key <span class="sh_symbol">|</span> Default <span class="sh_symbol">|</span> Extra <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> id    <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span>     <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span> PRI <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> name  <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> age   <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">)</span>     <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_number">3</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; DESC tea6;
+-------+------------+------+-----+---------+-------+
| Field | Type       | Null | Key | Default | Extra |
+-------+------------+------+-----+---------+-------+
| id    | int(4)     | NO   | PRI | NULL    |       |
| name  | varchar(4) | NO   |     | NULL    |       |
| age   | int(2)     | NO   |     | NULL    |       |
+-------+------------+------+-----+---------+-------+
3 rows in set (0.00 sec)
</pre></div></div>
      <p>添加address字段：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> ALTER TABLE tea6 ADD address <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">48</span><span class="sh_symbol">);</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.84</span> sec<span class="sh_symbol">)</span></li><li>Records<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Duplicates<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Warnings<span class="sh_symbol">:</span> <span class="sh_number">0</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; ALTER TABLE tea6 ADD address varchar(48);
Query OK, 0 rows affected (0.84 sec)
Records: 0  Duplicates: 0  Warnings: 0
</pre></div></div>
      <p>添加后（默认作为最后一个字段）：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> DESC tea6<span class="sh_symbol">;</span></li><li><span class="sh_symbol">+---------+-------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> Field   <span class="sh_symbol">|</span> Type        <span class="sh_symbol">|</span> Null <span class="sh_symbol">|</span> Key <span class="sh_symbol">|</span> Default <span class="sh_symbol">|</span> Extra <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+---------+-------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> id      <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span>      <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span> PRI <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> name    <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span>  <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> age     <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">)</span>      <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> address <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">48</span><span class="sh_symbol">)</span> <span class="sh_symbol">|</span> YES  <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+---------+-------------+------+-----+---------+-------+</span></li><li><span class="sh_number">4</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; DESC tea6;
+---------+-------------+------+-----+---------+-------+
| Field   | Type        | Null | Key | Default | Extra |
+---------+-------------+------+-----+---------+-------+
| id      | int(4)      | NO   | PRI | NULL    |       |
| name    | varchar(4)  | NO   |     | NULL    |       |
| age     | int(2)      | NO   |     | NULL    |       |
| address | varchar(48) | YES  |     | NULL    |       |
+---------+-------------+------+-----+---------+-------+
4 rows in set (0.00 sec)
</pre></div></div>
      <p>3）在tea6表的age列之后添加一个gender字段</p>
      <p>添加操作：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> ALTER TABLE tea6 ADD gender <span class="sh_keyword">enum</span><span class="sh_symbol">(</span><span class="sh_string">'boy'</span><span class="sh_symbol">,</span><span class="sh_string">'girl'</span><span class="sh_symbol">)</span> AFTER age<span class="sh_symbol">;</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.59</span> sec<span class="sh_symbol">)</span></li><li>Records<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Duplicates<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Warnings<span class="sh_symbol">:</span> <span class="sh_number">0</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; ALTER TABLE tea6 ADD gender enum('boy','girl') AFTER age;
Query OK, 0 rows affected (0.59 sec)
Records: 0  Duplicates: 0  Warnings: 0
</pre></div></div>
      <p>确认添加结果：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> DESC tea6<span class="sh_symbol">;</span></li><li><span class="sh_symbol">+---------+--------------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> Field   <span class="sh_symbol">|</span> Type               <span class="sh_symbol">|</span> Null <span class="sh_symbol">|</span> Key <span class="sh_symbol">|</span> Default <span class="sh_symbol">|</span> Extra <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+---------+--------------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> id      <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span>             <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span> PRI <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> name    <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span>         <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> age     <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">)</span>             <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> gender  <span class="sh_symbol">|</span> <span class="sh_keyword">enum</span><span class="sh_symbol">(</span><span class="sh_string">'boy'</span><span class="sh_symbol">,</span><span class="sh_string">'girl'</span><span class="sh_symbol">)</span> <span class="sh_symbol">|</span> YES  <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> address <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">48</span><span class="sh_symbol">)</span>        <span class="sh_symbol">|</span> YES  <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+---------+--------------------+------+-----+---------+-------+</span></li><li><span class="sh_number">5</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; DESC tea6;
+---------+--------------------+------+-----+---------+-------+
| Field   | Type               | Null | Key | Default | Extra |
+---------+--------------------+------+-----+---------+-------+
| id      | int(4)             | NO   | PRI | NULL    |       |
| name    | varchar(4)         | NO   |     | NULL    |       |
| age     | int(2)             | NO   |     | NULL    |       |
| gender  | enum('boy','girl') | YES  |     | NULL    |       |
| address | varchar(48)        | YES  |     | NULL    |       |
+---------+--------------------+------+-----+---------+-------+
5 rows in set (0.00 sec)
</pre></div></div>
      <p class="number">步骤二：修改字段名和字段类型</p>
      <p>将tea6表的gender字段改名为sex，并添加非空约束</p>
      <p>修改操作：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> ALTER TABLE tea6 CHANGE gender</li><li>    <span class="sh_symbol">-&gt;</span> sex <span class="sh_keyword">enum</span><span class="sh_symbol">(</span><span class="sh_string">'boy'</span><span class="sh_symbol">,</span><span class="sh_string">'girl'</span><span class="sh_symbol">)</span> NOT NULL<span class="sh_symbol">;</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.08</span> sec<span class="sh_symbol">)</span></li><li>Records<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Duplicates<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Warnings<span class="sh_symbol">:</span> <span class="sh_number">0</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; ALTER TABLE tea6 CHANGE gender
    -&gt; sex enum('boy','girl') NOT NULL;
Query OK, 0 rows affected (0.08 sec)
Records: 0  Duplicates: 0  Warnings: 0
</pre></div></div>
      <p>确认修改结果：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> DESC tea6<span class="sh_symbol">;</span></li><li><span class="sh_symbol">+---------+--------------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> Field   <span class="sh_symbol">|</span> Type               <span class="sh_symbol">|</span> Null <span class="sh_symbol">|</span> Key <span class="sh_symbol">|</span> Default <span class="sh_symbol">|</span> Extra <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+---------+--------------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> id      <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span>             <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span> PRI <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> name    <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span>         <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> age     <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">)</span>             <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> sex     <span class="sh_symbol">|</span> <span class="sh_keyword">enum</span><span class="sh_symbol">(</span><span class="sh_string">'boy'</span><span class="sh_symbol">,</span><span class="sh_string">'girl'</span><span class="sh_symbol">)</span> <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> address <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">48</span><span class="sh_symbol">)</span>        <span class="sh_symbol">|</span> YES  <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+---------+--------------------+------+-----+---------+-------+</span></li><li><span class="sh_number">5</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; DESC tea6;
+---------+--------------------+------+-----+---------+-------+
| Field   | Type               | Null | Key | Default | Extra |
+---------+--------------------+------+-----+---------+-------+
| id      | int(4)             | NO   | PRI | NULL    |       |
| name    | varchar(4)         | NO   |     | NULL    |       |
| age     | int(2)             | NO   |     | NULL    |       |
| sex     | enum('boy','girl') | NO   |     | NULL    |       |
| address | varchar(48)        | YES  |     | NULL    |       |
+---------+--------------------+------+-----+---------+-------+
5 rows in set (0.00 sec)
</pre></div></div>
      <p class="number">步骤三：删除字段</p>
      <p>删除tea6表中名为sex的字段：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> ALTER TABLE tea6 DROP sex<span class="sh_symbol">;</span>                             <span class="sh_comment">//删除操作</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.52</span> sec<span class="sh_symbol">)</span></li><li>Records<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Duplicates<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Warnings<span class="sh_symbol">:</span> <span class="sh_number">0</span></li><li><span style="display:none;">&nbsp;</span></li><li>mysql<span class="sh_symbol">&gt;</span> DESC tea6<span class="sh_symbol">;</span>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//确认删除结果</span></li><li><span class="sh_symbol">+---------+-------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> Field   <span class="sh_symbol">|</span> Type        <span class="sh_symbol">|</span> Null <span class="sh_symbol">|</span> Key <span class="sh_symbol">|</span> Default <span class="sh_symbol">|</span> Extra <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+---------+-------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> id      <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span>      <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span> PRI <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> name    <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span>  <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> age     <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">)</span>      <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> address <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">48</span><span class="sh_symbol">)</span> <span class="sh_symbol">|</span> YES  <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+---------+-------------+------+-----+---------+-------+</span></li><li><span class="sh_number">4</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; ALTER TABLE tea6 DROP sex;                             //删除操作
Query OK, 0 rows affected (0.52 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; DESC tea6;  										//确认删除结果
+---------+-------------+------+-----+---------+-------+
| Field   | Type        | Null | Key | Default | Extra |
+---------+-------------+------+-----+---------+-------+
| id      | int(4)      | NO   | PRI | NULL    |       |
| name    | varchar(4)  | NO   |     | NULL    |       |
| age     | int(2)      | NO   |     | NULL    |       |
| address | varchar(48) | YES  |     | NULL    |       |
+---------+-------------+------+-----+---------+-------+
4 rows in set (0.00 sec)
</pre></div></div>
      <a name="case2">
      </a>
      <h2>2 MySQL索引创建与删除</h2>
      <h3>2.1 问题</h3>
      <p>本案例要求熟悉MySQL索引的类型及操作方法，主要练习以下任务：</p>
      <ul class="list">
        <li>普通索引、唯一索引、主键索引的创建/删除
</li>
        <li>自增主键索引的创建/删除
</li>
        <li>建立员工表yg、工资表gz，数据内容如表-1、表-2所示，设置外键实现同步更新与同步删除
</li>
      </ul>
      <div class="table">
        <p>表-1 员工表yg的数据</p>
        <img src="./CASE_files/table001.png">
      </div>
      <div class="table">
        <p>表-2 工资表gz的数据</p>
        <img src="./CASE_files/table002.png">
      </div>
      <h3>2.2 步骤</h3>
      <p>实现此案例需要按照如下步骤进行。</p>
      <p class="number">步骤一：索引的创建与删除</p>
      <p>创建表的时候指定INDEX索引字段</p>
      <p>创建库home：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> create database home<span class="sh_symbol">;</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">1</span> row <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; create database home;
Query OK, 1 row affected (0.00 sec)
</pre></div></div>
      <p>允许有多个INDEX索引字段。比如，以下操作在home库中创建了tea4表，将其中的id、name作为索引字段：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> USE home<span class="sh_symbol">;</span></li><li>Database changed</li><li>mysql<span class="sh_symbol">&gt;</span> CREATE TABLE <span class="sh_function">tea4</span><span class="sh_symbol">(</span></li><li>    <span class="sh_symbol">-&gt;</span> id <span class="sh_function">char</span><span class="sh_symbol">(</span><span class="sh_number">6</span><span class="sh_symbol">)</span> NOT NULL<span class="sh_symbol">,</span></li><li>    <span class="sh_symbol">-&gt;</span> name <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">6</span><span class="sh_symbol">)</span> NOT NULL<span class="sh_symbol">,</span></li><li>    <span class="sh_symbol">-&gt;</span> age <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">)</span> NOT NULL<span class="sh_symbol">,</span></li><li>    <span class="sh_symbol">-&gt;</span> gender <span class="sh_function">ENUM</span><span class="sh_symbol">(</span><span class="sh_string">'boy'</span><span class="sh_symbol">,</span><span class="sh_string">'girl'</span><span class="sh_symbol">)</span> DEFAULT <span class="sh_string">'boy'</span><span class="sh_symbol">,</span></li><li>    <span class="sh_symbol">-&gt;</span> <span class="sh_function">INDEX</span><span class="sh_symbol">(</span>id<span class="sh_symbol">),</span><span class="sh_function">INDEX</span><span class="sh_symbol">(</span>name<span class="sh_symbol">)</span></li><li>    <span class="sh_symbol">-&gt;</span> <span class="sh_symbol">);</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.59</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; USE home;
Database changed
mysql&gt; CREATE TABLE tea4(
    -&gt; id char(6) NOT NULL,
    -&gt; name varchar(6) NOT NULL,
    -&gt; age int(3) NOT NULL,
    -&gt; gender ENUM('boy','girl') DEFAULT 'boy',
    -&gt; INDEX(id),INDEX(name)
    -&gt; );
Query OK, 0 rows affected (0.59 sec)
</pre></div></div>
      <p>查看新建tea4表的字段结构，可以发现两个非空索引字段的KEY标志为MUL：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> DESC tea4<span class="sh_symbol">;</span></li><li><span class="sh_symbol">+--------+--------------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> Field  <span class="sh_symbol">|</span> Type               <span class="sh_symbol">|</span> Null <span class="sh_symbol">|</span> Key <span class="sh_symbol">|</span> Default <span class="sh_symbol">|</span> Extra <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+--------+--------------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> id     <span class="sh_symbol">|</span> <span class="sh_function">char</span><span class="sh_symbol">(</span><span class="sh_number">6</span><span class="sh_symbol">)</span>            <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span> MUL <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> name   <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">6</span><span class="sh_symbol">)</span>         <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span> MUL <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> age    <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">)</span>             <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> gender <span class="sh_symbol">|</span> <span class="sh_keyword">enum</span><span class="sh_symbol">(</span><span class="sh_string">'boy'</span><span class="sh_symbol">,</span><span class="sh_string">'girl'</span><span class="sh_symbol">)</span> <span class="sh_symbol">|</span> YES  <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> boy     <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+--------+--------------------+------+-----+---------+-------+</span></li><li><span class="sh_number">4</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; DESC tea4;
+--------+--------------------+------+-----+---------+-------+
| Field  | Type               | Null | Key | Default | Extra |
+--------+--------------------+------+-----+---------+-------+
| id     | char(6)            | NO   | MUL | NULL    |       |
| name   | varchar(6)         | NO   | MUL | NULL    |       |
| age    | int(3)             | NO   |     | NULL    |       |
| gender | enum('boy','girl') | YES  |     | boy     |       |
+--------+--------------------+------+-----+---------+-------+
4 rows in set (0.00 sec)
</pre></div></div>
      <p>2）删除现有表的某个INDEX索引字段</p>
      <p>比如，删除tea4表中名称为named的INDEX索引字段：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> drop INDEX name ON tea4<span class="sh_symbol">;</span>                  <span class="sh_comment">//删除name字段的索引</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.18</span> sec<span class="sh_symbol">)</span></li><li>Records<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Duplicates<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Warnings<span class="sh_symbol">:</span> <span class="sh_number">0</span></li><li><span style="display:none;">&nbsp;</span></li><li>mysql<span class="sh_symbol">&gt;</span> DESC tea4<span class="sh_symbol">;</span>                                      <span class="sh_comment">//确认删除结果</span></li><li><span class="sh_symbol">+--------+--------------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> Field  <span class="sh_symbol">|</span> Type               <span class="sh_symbol">|</span> Null <span class="sh_symbol">|</span> Key <span class="sh_symbol">|</span> Default <span class="sh_symbol">|</span> Extra <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+--------+--------------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> id     <span class="sh_symbol">|</span> <span class="sh_function">char</span><span class="sh_symbol">(</span><span class="sh_number">6</span><span class="sh_symbol">)</span>            <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span> MUL <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> name   <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">6</span><span class="sh_symbol">)</span>         <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> age    <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">)</span>             <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> gender <span class="sh_symbol">|</span> <span class="sh_keyword">enum</span><span class="sh_symbol">(</span><span class="sh_string">'boy'</span><span class="sh_symbol">,</span><span class="sh_string">'girl'</span><span class="sh_symbol">)</span> <span class="sh_symbol">|</span> YES  <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> boy     <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+--------+--------------------+------+-----+---------+-------+</span></li><li><span class="sh_number">4</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; drop INDEX name ON tea4;                  //删除name字段的索引
Query OK, 0 rows affected (0.18 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; DESC tea4;                                      //确认删除结果
+--------+--------------------+------+-----+---------+-------+
| Field  | Type               | Null | Key | Default | Extra |
+--------+--------------------+------+-----+---------+-------+
| id     | char(6)            | NO   | MUL | NULL    |       |
| name   | varchar(6)         | NO   |     | NULL    |       |
| age    | int(3)             | NO   |     | NULL    |       |
| gender | enum('boy','girl') | YES  |     | boy     |       |
+--------+--------------------+------+-----+---------+-------+
4 rows in set (0.00 sec)
</pre></div></div>
      <p>3）在已有的某个表中设置INDEX索引字段</p>
      <p>比如，针对tea4表的age字段建立索引，名称为 nianling：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> CREATE INDEX nianling ON <span class="sh_function">tea4</span><span class="sh_symbol">(</span>age<span class="sh_symbol">);</span>  &nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//针对指定字段创建索引</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.62</span> sec<span class="sh_symbol">)</span></li><li>Records<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Duplicates<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Warnings<span class="sh_symbol">:</span> <span class="sh_number">0</span></li><li><span style="display:none;">&nbsp;</span></li><li>mysql<span class="sh_symbol">&gt;</span> DESC tea4<span class="sh_symbol">;</span>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//确认创建结果</span></li><li><span class="sh_symbol">+--------+--------------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> Field  <span class="sh_symbol">|</span> Type               <span class="sh_symbol">|</span> Null <span class="sh_symbol">|</span> Key <span class="sh_symbol">|</span> Default <span class="sh_symbol">|</span> Extra <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+--------+--------------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> id     <span class="sh_symbol">|</span> <span class="sh_function">char</span><span class="sh_symbol">(</span><span class="sh_number">6</span><span class="sh_symbol">)</span>            <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span> MUL <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> name   <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">6</span><span class="sh_symbol">)</span>         <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> age    <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">)</span>             <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span> MUL <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> gender <span class="sh_symbol">|</span> <span class="sh_keyword">enum</span><span class="sh_symbol">(</span><span class="sh_string">'boy'</span><span class="sh_symbol">,</span><span class="sh_string">'girl'</span><span class="sh_symbol">)</span> <span class="sh_symbol">|</span> YES  <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> boy     <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+--------+--------------------+------+-----+---------+-------+</span></li><li><span class="sh_number">4</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; CREATE INDEX nianling ON tea4(age);  	//针对指定字段创建索引
Query OK, 0 rows affected (0.62 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; DESC tea4;  								//确认创建结果
+--------+--------------------+------+-----+---------+-------+
| Field  | Type               | Null | Key | Default | Extra |
+--------+--------------------+------+-----+---------+-------+
| id     | char(6)            | NO   | MUL | NULL    |       |
| name   | varchar(6)         | NO   |     | NULL    |       |
| age    | int(3)             | NO   | MUL | NULL    |       |
| gender | enum('boy','girl') | YES  |     | boy     |       |
+--------+--------------------+------+-----+---------+-------+
4 rows in set (0.00 sec)
</pre></div></div>
      <p>4）查看指定表的索引信息</p>
      <p>使用SHOW INDEX 指令：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> SHOW INDEX FROM tea4<span class="sh_symbol">\</span>G</li><li><span class="sh_symbol">***************************</span> <span class="sh_number">1</span><span class="sh_symbol">.</span> row <span class="sh_symbol">***************************</span></li><li>        Table<span class="sh_symbol">:</span> tea4</li><li>   Non_unique<span class="sh_symbol">:</span> <span class="sh_number">1</span></li><li>     Key_name<span class="sh_symbol">:</span> id</li><li> Seq_in_index<span class="sh_symbol">:</span> <span class="sh_number">1</span></li><li>  Column_name<span class="sh_symbol">:</span> id</li><li>    Collation<span class="sh_symbol">:</span> A</li><li>  Cardinality<span class="sh_symbol">:</span> <span class="sh_number">0</span></li><li>     Sub_part<span class="sh_symbol">:</span> NULL</li><li>       Packed<span class="sh_symbol">:</span> NULL</li><li>         Null<span class="sh_symbol">:</span> </li><li>   Index_type<span class="sh_symbol">:</span> BTREE                          <span class="sh_comment">//使用B树算法</span></li><li>      Comment<span class="sh_symbol">:</span> </li><li>Index_comment<span class="sh_symbol">:</span> </li><li><span class="sh_symbol">***************************</span> <span class="sh_number">2</span><span class="sh_symbol">.</span> row <span class="sh_symbol">***************************</span></li><li>        Table<span class="sh_symbol">:</span> tea4</li><li>   Non_unique<span class="sh_symbol">:</span> <span class="sh_number">1</span></li><li>     Key_name<span class="sh_symbol">:</span> nianling                       <span class="sh_comment">//索引名称</span></li><li> Seq_in_index<span class="sh_symbol">:</span> <span class="sh_number">1</span></li><li>  Column_name<span class="sh_symbol">:</span> age                            <span class="sh_comment">//字段名称</span></li><li>    Collation<span class="sh_symbol">:</span> A</li><li>  Cardinality<span class="sh_symbol">:</span> <span class="sh_number">0</span></li><li>     Sub_part<span class="sh_symbol">:</span> NULL</li><li>       Packed<span class="sh_symbol">:</span> NULL</li><li>         Null<span class="sh_symbol">:</span> </li><li>   Index_type<span class="sh_symbol">:</span> BTREE</li><li>      Comment<span class="sh_symbol">:</span> </li><li>Index_comment<span class="sh_symbol">:</span> </li><li><span class="sh_number">2</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; SHOW INDEX FROM tea4\G
*************************** 1. row ***************************
        Table: tea4
   Non_unique: 1
     Key_name: id
 Seq_in_index: 1
  Column_name: id
    Collation: A
  Cardinality: 0
     Sub_part: NULL
       Packed: NULL
         Null: 
   Index_type: BTREE                          //使用B树算法
      Comment: 
Index_comment: 
*************************** 2. row ***************************
        Table: tea4
   Non_unique: 1
     Key_name: nianling                       //索引名称
 Seq_in_index: 1
  Column_name: age                            //字段名称
    Collation: A
  Cardinality: 0
     Sub_part: NULL
       Packed: NULL
         Null: 
   Index_type: BTREE
      Comment: 
Index_comment: 
2 rows in set (0.00 sec)
</pre></div></div>
      <p>5）创建表的时候指定UNIQUE索引字段</p>
      <p>UNIQUE表示唯一性的意思，同一个表中可以有多个字段具有唯一性。</p>
      <p>比如，创建tea5表，将id、name字段建立设置UNIQUE索引，age字段设置INDEX索引：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> CREATE TABLE <span class="sh_function">tea5</span><span class="sh_symbol">(</span></li><li>    <span class="sh_symbol">-&gt;</span> id <span class="sh_function">char</span><span class="sh_symbol">(</span><span class="sh_number">6</span><span class="sh_symbol">),</span></li><li>    <span class="sh_symbol">-&gt;</span> name <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> NOT NULL<span class="sh_symbol">,</span></li><li>    <span class="sh_symbol">-&gt;</span> age <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">)</span> NOT NULL<span class="sh_symbol">,</span></li><li>    <span class="sh_symbol">-&gt;</span> <span class="sh_function">UNIQUE</span><span class="sh_symbol">(</span>id<span class="sh_symbol">),</span><span class="sh_function">UNIQUE</span><span class="sh_symbol">(</span>name<span class="sh_symbol">),</span><span class="sh_function">INDEX</span><span class="sh_symbol">(</span>age<span class="sh_symbol">)</span></li><li>    <span class="sh_symbol">-&gt;</span> <span class="sh_symbol">);</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.30</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; CREATE TABLE tea5(
    -&gt; id char(6),
    -&gt; name varchar(4) NOT NULL,
    -&gt; age int(3) NOT NULL,
    -&gt; UNIQUE(id),UNIQUE(name),INDEX(age)
    -&gt; );
Query OK, 0 rows affected (0.30 sec)
</pre></div></div>
      <p>查看新建tea5表的字段结构，可发现UNIQUE字段的KEY标志为UNI；另外，由于字段name必须满足“NOT NULL”的非空约束，所以将其设置为UNIQUE后会自动变成了PRIMARY KEY主键字段：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> DESC tea5<span class="sh_symbol">;</span>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//确认设置结果</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> Field <span class="sh_symbol">|</span> Type       <span class="sh_symbol">|</span> Null <span class="sh_symbol">|</span> Key <span class="sh_symbol">|</span> Default <span class="sh_symbol">|</span> Extra <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> id    <span class="sh_symbol">|</span> <span class="sh_function">char</span><span class="sh_symbol">(</span><span class="sh_number">6</span><span class="sh_symbol">)</span>    <span class="sh_symbol">|</span> YES  <span class="sh_symbol">|</span> UNI <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> name  <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span> PRI <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> age   <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">)</span>     <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span> MUL <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_number">3</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.03</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; DESC tea5;  									//确认设置结果
+-------+------------+------+-----+---------+-------+
| Field | Type       | Null | Key | Default | Extra |
+-------+------------+------+-----+---------+-------+
| id    | char(6)    | YES  | UNI | NULL    |       |
| name  | varchar(4) | NO   | PRI | NULL    |       |
| age   | int(3)     | NO   | MUL | NULL    |       |
+-------+------------+------+-----+---------+-------+
3 rows in set (0.03 sec)
</pre></div></div>
      <p>6）删除UNIQUE索引、在已有的表中设置UNIQUE索引字段</p>
      <p>先删除tea5表name字段的唯一索引（与删除INDEX索引的方法相同）：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> DROP INDEX name ON tea5<span class="sh_symbol">;</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//清除UNIQUE索引</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.97</span> sec<span class="sh_symbol">)</span></li><li>Records<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Duplicates<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Warnings<span class="sh_symbol">:</span> <span class="sh_number">0</span></li><li><span style="display:none;">&nbsp;</span></li><li>mysql<span class="sh_symbol">&gt;</span> DESC tea5<span class="sh_symbol">;</span>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//确认删除结果</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> Field <span class="sh_symbol">|</span> Type       <span class="sh_symbol">|</span> Null <span class="sh_symbol">|</span> Key <span class="sh_symbol">|</span> Default <span class="sh_symbol">|</span> Extra <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> id    <span class="sh_symbol">|</span> <span class="sh_function">char</span><span class="sh_symbol">(</span><span class="sh_number">6</span><span class="sh_symbol">)</span>    <span class="sh_symbol">|</span> YES  <span class="sh_symbol">|</span> UNI <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> name  <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> age   <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">)</span>     <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span> MUL <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_number">3</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; DROP INDEX name ON tea5; 					//清除UNIQUE索引
Query OK, 0 rows affected (0.97 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; DESC tea5;  									//确认删除结果
+-------+------------+------+-----+---------+-------+
| Field | Type       | Null | Key | Default | Extra |
+-------+------------+------+-----+---------+-------+
| id    | char(6)    | YES  | UNI | NULL    |       |
| name  | varchar(4) | NO   |     | NULL    |       |
| age   | int(3)     | NO   | MUL | NULL    |       |
+-------+------------+------+-----+---------+-------+
3 rows in set (0.00 sec)
</pre></div></div>
      <p>重新为tea5表的name字段建立UNIQUE索引，并确认结果：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> CREATE UNIQUE INDEX name ON <span class="sh_function">tea5</span><span class="sh_symbol">(</span>name<span class="sh_symbol">);</span>  &nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//建立UNIQUE索引</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.47</span> sec<span class="sh_symbol">)</span></li><li>Records<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Duplicates<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Warnings<span class="sh_symbol">:</span> <span class="sh_number">0</span></li><li><span style="display:none;">&nbsp;</span></li><li>mysql<span class="sh_symbol">&gt;</span> DESC tea5<span class="sh_symbol">;</span>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//确认设置结果</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> Field <span class="sh_symbol">|</span> Type       <span class="sh_symbol">|</span> Null <span class="sh_symbol">|</span> Key <span class="sh_symbol">|</span> Default <span class="sh_symbol">|</span> Extra <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> id    <span class="sh_symbol">|</span> <span class="sh_function">char</span><span class="sh_symbol">(</span><span class="sh_number">6</span><span class="sh_symbol">)</span>    <span class="sh_symbol">|</span> YES  <span class="sh_symbol">|</span> UNI <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> name  <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span> PRI <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> age   <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">3</span><span class="sh_symbol">)</span>     <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span> MUL <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_number">3</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; CREATE UNIQUE INDEX name ON tea5(name);  	//建立UNIQUE索引
Query OK, 0 rows affected (0.47 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; DESC tea5;  									//确认设置结果
+-------+------------+------+-----+---------+-------+
| Field | Type       | Null | Key | Default | Extra |
+-------+------------+------+-----+---------+-------+
| id    | char(6)    | YES  | UNI | NULL    |       |
| name  | varchar(4) | NO   | PRI | NULL    |       |
| age   | int(3)     | NO   | MUL | NULL    |       |
+-------+------------+------+-----+---------+-------+
3 rows in set (0.00 sec)
</pre></div></div>
      <p>7）建表时设置PRIMARY KEY主键索引</p>
      <p>主键索引实际上在前面已经接触过了，建表的时候可以直接指定。如果表内一开始没有主键字段，则新设置的非空UNIQUE字段相当于具有PRIMARY KEY主键约束。</p>
      <p>每个表中的主键字段只能有一个。</p>
      <p>建表的时候，可以直接在某个字段的“约束条件”部分指定PRIMARY KEY；也可以在最后指定PRIMARY KEY(某个字段名)。比如：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> CREATE TABLE <span class="sh_function">biao01</span><span class="sh_symbol">(</span></li><li>    <span class="sh_symbol">-&gt;</span> id <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> PRIMARY KEY<span class="sh_symbol">,</span>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//直接在字段定义时约束</span></li><li>    <span class="sh_symbol">-&gt;</span> name <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">8</span><span class="sh_symbol">)</span></li><li>    <span class="sh_symbol">-&gt;</span> <span class="sh_symbol">);</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.19</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; CREATE TABLE biao01(
    -&gt; id int(4) PRIMARY KEY,  					//直接在字段定义时约束
    -&gt; name varchar(8)
    -&gt; );
Query OK, 0 rows affected (0.19 sec)
</pre></div></div>
      <p>或者：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> CREATE TABLE <span class="sh_function">biao02</span><span class="sh_symbol">(</span></li><li>    <span class="sh_symbol">-&gt;</span> id <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">),</span></li><li>    <span class="sh_symbol">-&gt;</span> name <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">8</span><span class="sh_symbol">),</span></li><li>    <span class="sh_symbol">-&gt;</span> PRIMARY <span class="sh_function">KEY</span><span class="sh_symbol">(</span>id<span class="sh_symbol">)</span>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//所有字段定义完，最后指定</span></li><li>    <span class="sh_symbol">-&gt;</span> <span class="sh_symbol">);</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.17</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; CREATE TABLE biao02(
    -&gt; id int(4),
    -&gt; name varchar(8),
    -&gt; PRIMARY KEY(id)  							//所有字段定义完，最后指定
    -&gt; );
Query OK, 0 rows affected (0.17 sec)
</pre></div></div>
      <p>在建表的时候，如果主键字段为int类型，还可以为其设置AUTO_INCREMENT自增属性，这样当添加新的表记录时，此字段的值会自动从1开始逐个增加，无需手动指定。比如，新建一个tea6表，将id列作为自增的主键字段：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> CREATE TABLE <span class="sh_function">tea6</span><span class="sh_symbol">(</span></li><li>    <span class="sh_symbol">-&gt;</span> id <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> AUTO_INCREMENT<span class="sh_symbol">,</span></li><li>    <span class="sh_symbol">-&gt;</span> name <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> NOT NULL<span class="sh_symbol">,</span></li><li>    <span class="sh_symbol">-&gt;</span> age <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">)</span> NOT NULL<span class="sh_symbol">,</span></li><li>    <span class="sh_symbol">-&gt;</span> PRIMARY <span class="sh_function">KEY</span><span class="sh_symbol">(</span>id<span class="sh_symbol">)</span></li><li>    <span class="sh_symbol">-&gt;</span> <span class="sh_symbol">);</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.29</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; CREATE TABLE tea6(
    -&gt; id int(4) AUTO_INCREMENT,
    -&gt; name varchar(4) NOT NULL,
    -&gt; age int(2) NOT NULL,
    -&gt; PRIMARY KEY(id)
    -&gt; );
Query OK, 0 rows affected (0.29 sec)
</pre></div></div>
      <p>8）删除现有表的PRIMARY KEY主键索引</p>
      <p>如果要移除某个表的PRIMARY KEY约束，需要通过ALTER TABLE指令修改。比如，以下操作将清除biao01表的主键索引。</p>
      <p>清除前（主键为id）：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> DESC biao01<span class="sh_symbol">;</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> Field <span class="sh_symbol">|</span> Type       <span class="sh_symbol">|</span> Null <span class="sh_symbol">|</span> Key <span class="sh_symbol">|</span> Default <span class="sh_symbol">|</span> Extra <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> id    <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span>     <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span> PRI <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> name  <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">8</span><span class="sh_symbol">)</span> <span class="sh_symbol">|</span> YES  <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_number">2</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; DESC biao01;
+-------+------------+------+-----+---------+-------+
| Field | Type       | Null | Key | Default | Extra |
+-------+------------+------+-----+---------+-------+
| id    | int(4)     | NO   | PRI | NULL    |       |
| name  | varchar(8) | YES  |     | NULL    |       |
+-------+------------+------+-----+---------+-------+
2 rows in set (0.00 sec)
</pre></div></div>
      <p>清除操作：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> ALTER TABLE biao01 DROP PRIMARY KEY<span class="sh_symbol">;</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.49</span> sec<span class="sh_symbol">)</span></li><li>Records<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Duplicates<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Warnings<span class="sh_symbol">:</span> <span class="sh_number">0</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; ALTER TABLE biao01 DROP PRIMARY KEY;
Query OK, 0 rows affected (0.49 sec)
Records: 0  Duplicates: 0  Warnings: 0
</pre></div></div>
      <p>清除后（无主键）：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> DESC biao01<span class="sh_symbol">;</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> Field <span class="sh_symbol">|</span> Type       <span class="sh_symbol">|</span> Null <span class="sh_symbol">|</span> Key <span class="sh_symbol">|</span> Default <span class="sh_symbol">|</span> Extra <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> id    <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span>     <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> name  <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">8</span><span class="sh_symbol">)</span> <span class="sh_symbol">|</span> YES  <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_number">2</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; DESC biao01;
+-------+------------+------+-----+---------+-------+
| Field | Type       | Null | Key | Default | Extra |
+-------+------------+------+-----+---------+-------+
| id    | int(4)     | NO   |     | NULL    |       |
| name  | varchar(8) | YES  |     | NULL    |       |
+-------+------------+------+-----+---------+-------+
2 rows in set (0.00 sec)
</pre></div></div>
      <p>当尝试删除tea6表的主键时，会出现异常：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> ALTER TABLE tea6 DROP PRIMARY KEY<span class="sh_symbol">;</span></li><li>ERROR <span class="sh_number">1075</span> <span class="sh_symbol">(</span><span class="sh_number">42000</span><span class="sh_symbol">):</span> Incorrect table definition<span class="sh_symbol">;</span> there can be only one auto column and it must be defined as a key</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; ALTER TABLE tea6 DROP PRIMARY KEY;
ERROR 1075 (42000): Incorrect table definition; there can be only one auto column and it must be defined as a key
</pre></div></div>
      <p>这是因为tea6表的主键字段id具有AUTO_INCREMNET自增属性，提示这种字段必须作为主键存在，因此若要清除此主键必须先清除自增属性——修改id列的字段定义：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> ALTER TABLE tea6 MODIFY id <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> NOT NULL<span class="sh_symbol">;</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.75</span> sec<span class="sh_symbol">)</span></li><li>Records<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Duplicates<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Warnings<span class="sh_symbol">:</span> <span class="sh_number">0</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; ALTER TABLE tea6 MODIFY id int(4) NOT NULL;
Query OK, 0 rows affected (0.75 sec)
Records: 0  Duplicates: 0  Warnings: 0
</pre></div></div>
      <p>然后再清除主键属性就OK了：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> ALTER TABLE tea6 DROP PRIMARY KEY<span class="sh_symbol">;</span>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//清除主键</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.39</span> sec<span class="sh_symbol">)</span></li><li>Records<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Duplicates<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Warnings<span class="sh_symbol">:</span> <span class="sh_number">0</span></li><li><span style="display:none;">&nbsp;</span></li><li>mysql<span class="sh_symbol">&gt;</span> desc tea6<span class="sh_symbol">;</span>                                         <span class="sh_comment">//确认清除结果</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> Field <span class="sh_symbol">|</span> Type       <span class="sh_symbol">|</span> Null <span class="sh_symbol">|</span> Key <span class="sh_symbol">|</span> Default <span class="sh_symbol">|</span> Extra <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> id    <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span>     <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> name  <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> age   <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">)</span>     <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_number">3</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.01</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; ALTER TABLE tea6 DROP PRIMARY KEY;  				//清除主键
Query OK, 0 rows affected (0.39 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; desc tea6;                                         //确认清除结果
+-------+------------+------+-----+---------+-------+
| Field | Type       | Null | Key | Default | Extra |
+-------+------------+------+-----+---------+-------+
| id    | int(4)     | NO   |     | NULL    |       |
| name  | varchar(4) | NO   |     | NULL    |       |
| age   | int(2)     | NO   |     | NULL    |       |
+-------+------------+------+-----+---------+-------+
3 rows in set (0.01 sec)
</pre></div></div>
      <p>9）为现有表添加PRIMARY KEY主键索引</p>
      <p>重新为tea6表指定主键字段，仍然使用id列：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> ALTER TABLE tea6 ADD PRIMARY <span class="sh_function">KEY</span><span class="sh_symbol">(</span>id<span class="sh_symbol">);</span>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//设置主键字段</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.35</span> sec<span class="sh_symbol">)</span></li><li>Records<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Duplicates<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Warnings<span class="sh_symbol">:</span> <span class="sh_number">0</span></li><li><span style="display:none;">&nbsp;</span></li><li>mysql<span class="sh_symbol">&gt;</span> DESC tea6<span class="sh_symbol">;</span>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sh_comment">//确认设置结果</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> Field <span class="sh_symbol">|</span> Type       <span class="sh_symbol">|</span> Null <span class="sh_symbol">|</span> Key <span class="sh_symbol">|</span> Default <span class="sh_symbol">|</span> Extra <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_symbol">|</span> id    <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span>     <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span> PRI <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> name  <span class="sh_symbol">|</span> <span class="sh_function">varchar</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span> age   <span class="sh_symbol">|</span> <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">2</span><span class="sh_symbol">)</span>     <span class="sh_symbol">|</span> NO   <span class="sh_symbol">|</span>     <span class="sh_symbol">|</span> NULL    <span class="sh_symbol">|</span>       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------------+------+-----+---------+-------+</span></li><li><span class="sh_number">3</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; ALTER TABLE tea6 ADD PRIMARY KEY(id);  			//设置主键字段
Query OK, 0 rows affected (0.35 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql&gt; DESC tea6;  										//确认设置结果
+-------+------------+------+-----+---------+-------+
| Field | Type       | Null | Key | Default | Extra |
+-------+------------+------+-----+---------+-------+
| id    | int(4)     | NO   | PRI | NULL    |       |
| name  | varchar(4) | NO   |     | NULL    |       |
| age   | int(2)     | NO   |     | NULL    |       |
+-------+------------+------+-----+---------+-------+
3 rows in set (0.00 sec)
</pre></div></div>
      <p class="number">步骤二：创建数据库并设置外键实现同步更新与同步删除</p>
      <p>根据实验任务要求，两个表格的字段结构如表-1、表-2所示。</p>
      <p>1）创建yg表，用来记录员工工号、姓名</p>
      <p>其中yg_id列作为主键，并设置自增属性</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> CREATE TABLE <span class="sh_function">yg</span><span class="sh_symbol">(</span></li><li>    <span class="sh_symbol">-&gt;</span> yg_id <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> AUTO_INCREMENT<span class="sh_symbol">,</span></li><li>    <span class="sh_symbol">-&gt;</span> name <span class="sh_function">char</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">)</span> NOT NULL<span class="sh_symbol">,</span></li><li>    <span class="sh_symbol">-&gt;</span> PRIMARY <span class="sh_function">KEY</span><span class="sh_symbol">(</span>yg_id<span class="sh_symbol">)</span></li><li>    <span class="sh_symbol">-&gt;</span> <span class="sh_symbol">);</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.15</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; CREATE TABLE yg(
    -&gt; yg_id int(4) AUTO_INCREMENT,
    -&gt; name char(16) NOT NULL,
    -&gt; PRIMARY KEY(yg_id)
    -&gt; );
Query OK, 0 rows affected (0.15 sec)
</pre></div></div>
      <p>2）创建gz表，用来记录员工的工资信息</p>
      <p>其中gz_id需要参考员工工号，即gz表的gz_id字段设为外键，将yg表的yg_id字段作为参考键：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> CREATE TABLE <span class="sh_function">gz</span><span class="sh_symbol">(</span></li><li>    <span class="sh_symbol">-&gt;</span> gz_id <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> NOT NULL<span class="sh_symbol">,</span></li><li>    <span class="sh_symbol">-&gt;</span> name <span class="sh_function">char</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">)</span> NOT NULL<span class="sh_symbol">,</span></li><li>    <span class="sh_symbol">-&gt;</span> gz <span class="sh_function">float</span><span class="sh_symbol">(</span><span class="sh_number">7</span><span class="sh_symbol">,</span><span class="sh_number">2</span><span class="sh_symbol">)</span> NOT NULL DEFAULT <span class="sh_number">0</span><span class="sh_symbol">,</span></li><li>    <span class="sh_symbol">-&gt;</span> <span class="sh_function">INDEX</span><span class="sh_symbol">(</span>name<span class="sh_symbol">),</span></li><li>    <span class="sh_symbol">-&gt;</span> FOREIGN <span class="sh_function">KEY</span><span class="sh_symbol">(</span>gz_id<span class="sh_symbol">)</span> REFERENCES <span class="sh_function">yg</span><span class="sh_symbol">(</span>yg_id<span class="sh_symbol">)</span></li><li>    <span class="sh_symbol">-&gt;</span> ON UPDATE CASCADE ON DELETE CASCADE</li><li>    <span class="sh_symbol">-&gt;</span> <span class="sh_symbol">);</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.23</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; CREATE TABLE gz(
    -&gt; gz_id int(4) NOT NULL,
    -&gt; name char(16) NOT NULL,
    -&gt; gz float(7,2) NOT NULL DEFAULT 0,
    -&gt; INDEX(name),
    -&gt; FOREIGN KEY(gz_id) REFERENCES yg(yg_id)
    -&gt; ON UPDATE CASCADE ON DELETE CASCADE
    -&gt; );
Query OK, 0 rows affected (0.23 sec)

</pre></div></div>
      <p>3）为yg表添加2条员工信息记录</p>
      <p>因yg_id有AUTO_INCREMENT属性，会自动填充，所以只要为name列赋值就可以了。</p>
      <p>插入表记录可使用INSERT指令，这里先执行下列操作，具体在下一章学习：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> INSERT INTO <span class="sh_function">yg</span><span class="sh_symbol">(</span>name<span class="sh_symbol">)</span> <span class="sh_function">VALUES</span><span class="sh_symbol">(</span><span class="sh_string">'Jerry'</span><span class="sh_symbol">),(</span><span class="sh_string">'Tom'</span><span class="sh_symbol">);</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">2</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.16</span> sec<span class="sh_symbol">)</span></li><li>Records<span class="sh_symbol">:</span> <span class="sh_number">2</span>  Duplicates<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Warnings<span class="sh_symbol">:</span> <span class="sh_number">0</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; INSERT INTO yg(name) VALUES('Jerry'),('Tom');
Query OK, 2 rows affected (0.16 sec)
Records: 2  Duplicates: 0  Warnings: 0
</pre></div></div>
      <p>确认yg表的数据记录：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> SELECT <span class="sh_symbol">*</span> FROM yg<span class="sh_symbol">;</span></li><li><span class="sh_symbol">+-------+-------+</span></li><li><span class="sh_symbol">|</span> yg_id <span class="sh_symbol">|</span> name  <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+-------+</span></li><li><span class="sh_symbol">|</span>     <span class="sh_number">1</span> <span class="sh_symbol">|</span> Jerry <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span>     <span class="sh_number">2</span> <span class="sh_symbol">|</span> Tom   <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+-------+</span></li><li><span class="sh_number">2</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; SELECT * FROM yg;
+-------+-------+
| yg_id | name  |
+-------+-------+
|     1 | Jerry |
|     2 | Tom   |
+-------+-------+
2 rows in set (0.00 sec)
</pre></div></div>
      <p>4）为gz表添加2条工资信息记录</p>
      <p>同上，数据参考图-2，插入相应的工资记录（gz_id字段未指定默认值，也未设置自增属性，所以需要手动赋值）：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> INSERT INTO <span class="sh_function">gz</span><span class="sh_symbol">(</span>gz_id<span class="sh_symbol">,</span>name<span class="sh_symbol">,</span>gz<span class="sh_symbol">)</span></li><li>    <span class="sh_symbol">-&gt;</span> <span class="sh_function">VALUES</span><span class="sh_symbol">(</span><span class="sh_number">1</span><span class="sh_symbol">,</span><span class="sh_string">'Jerry'</span><span class="sh_symbol">,</span><span class="sh_number">12000</span><span class="sh_symbol">),(</span><span class="sh_number">2</span><span class="sh_symbol">,</span><span class="sh_string">'Tom'</span><span class="sh_symbol">,</span><span class="sh_number">8000</span><span class="sh_symbol">)</span></li><li>    <span class="sh_symbol">-&gt;</span> <span class="sh_symbol">;</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">2</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.06</span> sec<span class="sh_symbol">)</span></li><li>Records<span class="sh_symbol">:</span> <span class="sh_number">2</span>  Duplicates<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Warnings<span class="sh_symbol">:</span> <span class="sh_number">0</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; INSERT INTO gz(gz_id,name,gz)
    -&gt; VALUES(1,'Jerry',12000),(2,'Tom',8000)
    -&gt; ;
Query OK, 2 rows affected (0.06 sec)
Records: 2  Duplicates: 0  Warnings: 0
</pre></div></div>
      <p>确认gz表的数据记录：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> SELECT <span class="sh_symbol">*</span> FROM gz<span class="sh_symbol">;</span></li><li><span class="sh_symbol">+-------+-------+----------+</span></li><li><span class="sh_symbol">|</span> gz_id <span class="sh_symbol">|</span> name  <span class="sh_symbol">|</span> gz       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+-------+----------+</span></li><li><span class="sh_symbol">|</span>     <span class="sh_number">1</span> <span class="sh_symbol">|</span> Jerry <span class="sh_symbol">|</span> <span class="sh_number">12000.00</span> <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span>     <span class="sh_number">2</span> <span class="sh_symbol">|</span> Tom   <span class="sh_symbol">|</span>  <span class="sh_number">8000.00</span> <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+-------+----------+</span></li><li><span class="sh_number">2</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.05</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; SELECT * FROM gz;
+-------+-------+----------+
| gz_id | name  | gz       |
+-------+-------+----------+
|     1 | Jerry | 12000.00 |
|     2 | Tom   |  8000.00 |
+-------+-------+----------+
2 rows in set (0.05 sec)
</pre></div></div>
      <p>5）验证表记录的UPDATE更新联动</p>
      <p>将yg表中Jerry用户的yg_id修改为1234：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> update yg SET yg_id<span class="sh_symbol">=</span><span class="sh_number">1234</span> WHERE name<span class="sh_symbol">=</span><span class="sh_string">'Jerry'</span><span class="sh_symbol">;</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">1</span> row <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.05</span> sec<span class="sh_symbol">)</span></li><li>Rows matched<span class="sh_symbol">:</span> <span class="sh_number">1</span>  Changed<span class="sh_symbol">:</span> <span class="sh_number">1</span>  Warnings<span class="sh_symbol">:</span> <span class="sh_number">0</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; update yg SET yg_id=1234 WHERE name='Jerry';
Query OK, 1 row affected (0.05 sec)
Rows matched: 1  Changed: 1  Warnings: 0
</pre></div></div>
      <p>确认修改结果：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> SELECT <span class="sh_symbol">*</span> FROM yg<span class="sh_symbol">;</span></li><li><span class="sh_symbol">+-------+-------+</span></li><li><span class="sh_symbol">|</span> yg_id <span class="sh_symbol">|</span> name  <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+-------+</span></li><li><span class="sh_symbol">|</span>     <span class="sh_number">2</span> <span class="sh_symbol">|</span> Tom   <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span>  <span class="sh_number">1234</span> <span class="sh_symbol">|</span> Jerry <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+-------+</span></li><li><span class="sh_number">2</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; SELECT * FROM yg;
+-------+-------+
| yg_id | name  |
+-------+-------+
|     2 | Tom   |
|  1234 | Jerry |
+-------+-------+
2 rows in set (0.00 sec)
</pre></div></div>
      <p>同时也会发现，gz表中Jerry用户的gz_id也跟着变了：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> SELECT <span class="sh_symbol">*</span> FROM gz<span class="sh_symbol">;</span></li><li><span class="sh_symbol">+-------+-------+----------+</span></li><li><span class="sh_symbol">|</span> gz_id <span class="sh_symbol">|</span> name  <span class="sh_symbol">|</span> gz       <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+-------+----------+</span></li><li><span class="sh_symbol">|</span>  <span class="sh_number">1234</span> <span class="sh_symbol">|</span> Jerry <span class="sh_symbol">|</span> <span class="sh_number">12000.00</span> <span class="sh_symbol">|</span></li><li><span class="sh_symbol">|</span>     <span class="sh_number">2</span> <span class="sh_symbol">|</span> Tom   <span class="sh_symbol">|</span>  <span class="sh_number">8000.00</span> <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+-------+----------+</span></li><li><span class="sh_number">2</span> rows <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; SELECT * FROM gz;
+-------+-------+----------+
| gz_id | name  | gz       |
+-------+-------+----------+
|  1234 | Jerry | 12000.00 |
|     2 | Tom   |  8000.00 |
+-------+-------+----------+
2 rows in set (0.00 sec)
</pre></div></div>
      <p>6）验证表记录的DELETE删除联动</p>
      <p>删除yg表中用户Jerry的记录：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> DELETE FROM yg WHERE name<span class="sh_symbol">=</span><span class="sh_string">'Jerry'</span><span class="sh_symbol">;</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">1</span> row <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.05</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; DELETE FROM yg WHERE name='Jerry';
Query OK, 1 row affected (0.05 sec)
</pre></div></div>
      <p>确认删除结果：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> SELECT <span class="sh_symbol">*</span> FROM yg<span class="sh_symbol">;</span></li><li><span class="sh_symbol">+-------+------+</span></li><li><span class="sh_symbol">|</span> yg_id <span class="sh_symbol">|</span> name <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------+</span></li><li><span class="sh_symbol">|</span>     <span class="sh_number">2</span> <span class="sh_symbol">|</span> Tom  <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------+</span></li><li><span class="sh_number">1</span> row <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; SELECT * FROM yg;
+-------+------+
| yg_id | name |
+-------+------+
|     2 | Tom  |
+-------+------+
1 row in set (0.00 sec)
</pre></div></div>
      <p>查看gz表中的变化（Jerry的记录也没了）：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> SELECT <span class="sh_symbol">*</span> FROM gz<span class="sh_symbol">;</span></li><li><span class="sh_symbol">+-------+------+---------+</span></li><li><span class="sh_symbol">|</span> gz_id <span class="sh_symbol">|</span> name <span class="sh_symbol">|</span> gz      <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------+---------+</span></li><li><span class="sh_symbol">|</span>     <span class="sh_number">2</span> <span class="sh_symbol">|</span> Tom  <span class="sh_symbol">|</span> <span class="sh_number">8000.00</span> <span class="sh_symbol">|</span></li><li><span class="sh_symbol">+-------+------+---------+</span></li><li><span class="sh_number">1</span> row <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; SELECT * FROM gz;
+-------+------+---------+
| gz_id | name | gz      |
+-------+------+---------+
|     2 | Tom  | 8000.00 |
+-------+------+---------+
1 row in set (0.00 sec)
</pre></div></div>
      <p>7）删除指定表的外键约束</p>
      <p>先通过SHOW指令获取表格的外键约束名称：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> SHOW CREATE TABLE gz<span class="sh_symbol">\</span>G</li><li><span class="sh_symbol">***************************</span> <span class="sh_number">1</span><span class="sh_symbol">.</span> row <span class="sh_symbol">***************************</span></li><li>       Table<span class="sh_symbol">:</span> gz</li><li>Create Table<span class="sh_symbol">:</span> CREATE TABLE `gz` <span class="sh_symbol">(</span></li><li>  `gz_id` <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> NOT NULL<span class="sh_symbol">,</span></li><li>  `name` <span class="sh_function">char</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">)</span> NOT NULL<span class="sh_symbol">,</span></li><li>  `gz` <span class="sh_function">float</span><span class="sh_symbol">(</span><span class="sh_number">7</span><span class="sh_symbol">,</span><span class="sh_number">2</span><span class="sh_symbol">)</span> NOT NULL DEFAULT <span class="sh_string">'0.00'</span><span class="sh_symbol">,</span></li><li>  KEY `name` <span class="sh_symbol">(</span>`name`<span class="sh_symbol">),</span></li><li>  KEY `gz_id` <span class="sh_symbol">(</span>`gz_id`<span class="sh_symbol">),</span></li><li>  CONSTRAINT `gz_ibfk_1` FOREIGN <span class="sh_function">KEY</span> <span class="sh_symbol">(</span>`gz_id`<span class="sh_symbol">)</span> REFERENCES `yg` <span class="sh_symbol">(</span>`yg_id`<span class="sh_symbol">)</span> ON DELETE CASCADE ON UPDATE CASCADE</li><li><span class="sh_symbol">)</span> ENGINE<span class="sh_symbol">=</span>InnoDB DEFAULT CHARSET<span class="sh_symbol">=</span>utf8</li><li><span class="sh_number">1</span> row <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; SHOW CREATE TABLE gz\G
*************************** 1. row ***************************
       Table: gz
Create Table: CREATE TABLE `gz` (
  `gz_id` int(4) NOT NULL,
  `name` char(16) NOT NULL,
  `gz` float(7,2) NOT NULL DEFAULT '0.00',
  KEY `name` (`name`),
  KEY `gz_id` (`gz_id`),
  CONSTRAINT `gz_ibfk_1` FOREIGN KEY (`gz_id`) REFERENCES `yg` (`yg_id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8
1 row in set (0.00 sec)
</pre></div></div>
      <p>其中gz_ibfk_1即删除外键约束时要用到的名称。</p>
      <p>删除操作：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> ALTER TABLE gz DROP FOREIGN KEY gz_ibfk_1<span class="sh_symbol">;</span></li><li>Query OK<span class="sh_symbol">,</span> <span class="sh_number">0</span> rows <span class="sh_function">affected</span> <span class="sh_symbol">(</span><span class="sh_number">0.01</span> sec<span class="sh_symbol">)</span></li><li>Records<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Duplicates<span class="sh_symbol">:</span> <span class="sh_number">0</span>  Warnings<span class="sh_symbol">:</span> <span class="sh_number">0</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; ALTER TABLE gz DROP FOREIGN KEY gz_ibfk_1;
Query OK, 0 rows affected (0.01 sec)
Records: 0  Duplicates: 0  Warnings: 0
</pre></div></div>
      <p>确认删除结果：</p>
      <div class="snippet-container" style="undefined;"><div class="sh_acid snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#" style="display: none;">copy</a><a class="snippet-text sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">text</a><a class="snippet-window sh_url" href="http://tts.tmooc.cn/ttsPage/LINUX/NSDTN201801/DBA1/DAY02/CASE/01/index.html#">pop-up</a></pre></div><pre class="code sh_javascript snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>mysql<span class="sh_symbol">&gt;</span> SHOW CREATE TABLE gz<span class="sh_symbol">\</span>G</li><li><span class="sh_symbol">***************************</span> <span class="sh_number">1</span><span class="sh_symbol">.</span> row <span class="sh_symbol">***************************</span></li><li>       Table<span class="sh_symbol">:</span> gz</li><li>Create Table<span class="sh_symbol">:</span> CREATE TABLE `gz` <span class="sh_symbol">(</span></li><li>  `gz_id` <span class="sh_function">int</span><span class="sh_symbol">(</span><span class="sh_number">4</span><span class="sh_symbol">)</span> NOT NULL<span class="sh_symbol">,</span></li><li>  `name` <span class="sh_function">char</span><span class="sh_symbol">(</span><span class="sh_number">16</span><span class="sh_symbol">)</span> NOT NULL<span class="sh_symbol">,</span></li><li>  `gz` <span class="sh_function">float</span><span class="sh_symbol">(</span><span class="sh_number">7</span><span class="sh_symbol">,</span><span class="sh_number">2</span><span class="sh_symbol">)</span> NOT NULL DEFAULT <span class="sh_string">'0.00'</span><span class="sh_symbol">,</span></li><li>  KEY `name` <span class="sh_symbol">(</span>`name`<span class="sh_symbol">),</span></li><li>  KEY `gz_id` <span class="sh_symbol">(</span>`gz_id`<span class="sh_symbol">)</span></li><li><span class="sh_symbol">)</span> ENGINE<span class="sh_symbol">=</span>InnoDB DEFAULT CHARSET<span class="sh_symbol">=</span>utf8</li><li><span class="sh_number">1</span> row <span class="sh_keyword">in</span> <span class="sh_function">set</span> <span class="sh_symbol">(</span><span class="sh_number">0.00</span> sec<span class="sh_symbol">)</span></li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mysql&gt; SHOW CREATE TABLE gz\G
*************************** 1. row ***************************
       Table: gz
Create Table: CREATE TABLE `gz` (
  `gz_id` int(4) NOT NULL,
  `name` char(16) NOT NULL,
  `gz` float(7,2) NOT NULL DEFAULT '0.00',
  KEY `name` (`name`),
  KEY `gz_id` (`gz_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
1 row in set (0.00 sec)
</pre></div></div>
    </div>
  
</body></html>